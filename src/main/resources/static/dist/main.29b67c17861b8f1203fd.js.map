{"version":3,"file":"main.29b67c17861b8f1203fd.js","mappings":"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","sources":["webpack://javascript/./src/components/tables/PenaltyTable.jsx","webpack://javascript/./src/components/tables/DisqualificationTable.jsx","webpack://javascript/./src/components/scores/CompareScoresModal.jsx","webpack://javascript/./src/components/page/StageScorePage.jsx"],"sourcesContent":["/* eslint-disable react/display-name */\r\nimport React, { useMemo, useEffect, useState } from \"react\";\r\nimport ResultTable from \"../common/table/ResultTable\";\r\nimport { TeamDiv } from \"../common/Div\";\r\nimport { NrBadge } from \"../common/NrBadge\";\r\nimport axios from \"axios\";\r\nimport { backendUrl } from \"../utils/fetchUtils\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTimesCircle } from \"@fortawesome/free-solid-svg-icons\";\r\nimport authHeader from \"../../service/auth-header\";\r\n\r\nconst PenaltyTable = (props) => {\r\n  const [penalties, setPenalties] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  const fetchPenalties = () => {\r\n    axios\r\n      .get(`${backendUrl()}/penalty/getPenalties?eventId=${props.eventId}`)\r\n      .then((res) => {\r\n        setPenalties(res.data);\r\n        setIsLoading(false);\r\n      });\r\n  };\r\n\r\n  const removePenalty = (penaltyId) => {\r\n    axios\r\n      .post(\r\n        `${backendUrl()}/penalty/removePenalty?penaltyId=${penaltyId}`,\r\n        {},\r\n        {\r\n          headers: authHeader(),\r\n        }\r\n      )\r\n      .then((res) => {\r\n        props.onRemove();\r\n        fetchPenalties();\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchPenalties();\r\n  }, []);\r\n\r\n  const columns = useMemo(\r\n    () => [\r\n      {\r\n        width: \"20%\",\r\n        id: \"team\",\r\n        Header: \"Załoga\",\r\n        disableFilters: true,\r\n        disableSortBy: true,\r\n        Cell: (cellInfo) => (\r\n          <>\r\n            <div className=\"py-1 px-2 mx-1 d-grid\">\r\n              <NrBadge value={cellInfo.row.original.number}></NrBadge>\r\n            </div>\r\n            <div className=\"px-1 mx-1 d-grid\">\r\n              <TeamDiv team={cellInfo.row.original} />\r\n            </div>\r\n          </>\r\n        ),\r\n      },\r\n      {\r\n        width: \"70%\",\r\n        id: \"penalty\",\r\n        Header: \"Czas - Powód - OS/PS\",\r\n        disableFilters: true,\r\n        disableSortBy: true,\r\n        Cell: (cellInfo) => (\r\n          <table className=\"font14\">\r\n            {cellInfo.row.original.penalties.map((penalty) => (\r\n              <>\r\n                <tr>\r\n                  <td className=\"text-left fw-bolder\" style={{ width: \"20%\" }}>\r\n                    {penalty.description !== \"Taryfa\"\r\n                      ? penalty.penaltySec + \" s\"\r\n                      : \"\"}\r\n                  </td>\r\n                  <td className=\"text-left px-3\" style={{ width: \"45%\" }}>\r\n                    {penalty.description}\r\n                  </td>\r\n                  <td className=\"text-left px-3\" style={{ width: \"40%\" }}>\r\n                    {penalty.name}\r\n                  </td>\r\n                  <td style={{ width: \"15%\" }}>\r\n                    {props.referee ? (\r\n                      <FontAwesomeIcon\r\n                        icon={faTimesCircle}\r\n                        onClick={() => removePenalty(penalty.penaltyId)}\r\n                        title={\"Usuń kare\"}\r\n                      />\r\n                    ) : (\r\n                      <></>\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n              </>\r\n            ))}\r\n          </table>\r\n        ),\r\n      },\r\n    ],\r\n    [props.referee]\r\n  );\r\n\r\n  return (\r\n    <ResultTable\r\n      columns={columns}\r\n      data={penalties}\r\n      pageCount={3}\r\n      isLoading={isLoading}\r\n      isFooter={false}\r\n      isHeader={true}\r\n      cursor={\"pointer\"}\r\n      manualPagination={true}\r\n    />\r\n  );\r\n};\r\n\r\nexport default PenaltyTable;\r\n","/* eslint-disable react/display-name */\r\nimport React, { useMemo, useEffect, useState } from \"react\";\r\nimport ResultTable from \"../common/table/ResultTable\";\r\nimport { TeamDiv } from \"../common/Div\";\r\nimport axios from \"axios\";\r\nimport { backendUrl } from \"../utils/fetchUtils\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faTimesCircle } from \"@fortawesome/free-solid-svg-icons\";\r\nimport authHeader from \"../../service/auth-header\";\r\nimport { NrBadge } from \"../common/NrBadge\";\r\n\r\nconst DisqualificationTable = (props) => {\r\n  const [penalties, setPenalties] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  const fetchPenalties = () => {\r\n    axios\r\n      .get(\r\n        `${backendUrl()}/penalty/getDisqualifications?eventId=${props.eventId}`\r\n      )\r\n      .then((res) => {\r\n        setPenalties(res.data);\r\n        setIsLoading(false);\r\n      });\r\n  };\r\n\r\n  const removePenalty = (penaltyId) => {\r\n    axios\r\n      .post(\r\n        `${backendUrl()}/penalty/removeDisqualification?penaltyId=${penaltyId}`,\r\n        {},\r\n        {\r\n          headers: authHeader(),\r\n        }\r\n      )\r\n      .then((res) => {\r\n        setIsLoading(true);\r\n        props.onRemove();\r\n        fetchPenalties();\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchPenalties();\r\n  }, []);\r\n\r\n  const columns = useMemo(\r\n    () => [\r\n      {\r\n        width: \"5%\",\r\n        id: \"nr\",\r\n        Header: \"Nr\",\r\n        accessor: (cellInfo) => cellInfo.number,\r\n        disableFilters: true,\r\n        disableSortBy: true,\r\n        Cell: (row) => <NrBadge value={row.value}></NrBadge>,\r\n      },\r\n      {\r\n        width: \"20%\",\r\n        id: \"team\",\r\n        Header: \"Załoga\",\r\n        disableFilters: true,\r\n        disableSortBy: true,\r\n        Cell: (cellInfo) => <TeamDiv team={cellInfo.row.original} />,\r\n      },\r\n      {\r\n        width: \"60%\",\r\n        id: \"penalty\",\r\n        Header: \"Powód - OS/PS\",\r\n        disableFilters: true,\r\n        disableSortBy: true,\r\n        Cell: (cellInfo) => (\r\n          <table className=\"font14\">\r\n            {cellInfo.row.original.penalties.map((penalty) => (\r\n              <>\r\n                <tr>\r\n                  <td className=\"text-left fw-bolder\"></td>\r\n                  <td className=\"text-left px-3 width-300\">\r\n                    {penalty.description}\r\n                  </td>\r\n                  <td className=\"text-left px-3\">{penalty.name}</td>\r\n                  <td>\r\n                    {props.referee ? (\r\n                      <FontAwesomeIcon\r\n                        icon={faTimesCircle}\r\n                        onClick={() => removePenalty(penalty.penaltyId)}\r\n                        title={\"Wycofaj dyskwalifikacje\"}\r\n                      />\r\n                    ) : (\r\n                      <></>\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n              </>\r\n            ))}\r\n          </table>\r\n        ),\r\n      },\r\n    ],\r\n    [props.referee]\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <ResultTable\r\n        columns={columns}\r\n        data={penalties}\r\n        pageCount={3}\r\n        isLoading={isLoading}\r\n        isFooter={false}\r\n        isHeader={true}\r\n        cursor={\"pointer\"}\r\n        manualPagination={true}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DisqualificationTable;\r\n","import React, { useState, useEffect, useMemo } from \"react\";\r\n\r\nimport axios from \"axios\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport Button from \"react-bootstrap/Button\";\r\n\r\nimport { backendUrl, fetchGetCompareScores } from \"../utils/fetchUtils\";\r\nimport { Spinner } from \"react-bootstrap\";\r\nimport { closeOnBack, timeToString } from \"../utils/utils\";\r\nimport {\r\n  CarDiv,\r\n  LightScoreDiv,\r\n  LightScoreDivPenalty,\r\n  ScoreDiv,\r\n  ScoreDivPenalty,\r\n  TeamDiv,\r\n} from \"../common/Div\";\r\nimport { NrBadge } from \"../common/NrBadge\";\r\n\r\nexport const CompareScoresModal = ({\r\n  show,\r\n  handleClose,\r\n  eventId,\r\n  markedNumbers,\r\n  psOptions,\r\n}) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [scores, setScores] = useState([]);\r\n  const [teams, setTeams] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (!show) return;\r\n\r\n    closeOnBack(handleClose);\r\n    if (markedNumbers.length === 2) {\r\n      fetchTeams();\r\n      fetchGetCompareScores(eventId, markedNumbers, (data) => {\r\n        setScores(data);\r\n      });\r\n    }\r\n  }, [show]);\r\n\r\n  const fetchTeams = () => {\r\n    if (eventId === undefined) return;\r\n    axios\r\n      .get(`${backendUrl()}/event/getBasicTeams?eventId=${eventId}`)\r\n      .then((res) => {\r\n        setTeams(res.data);\r\n      });\r\n  };\r\n\r\n  const sumByTeamNumber = (teamNumber) => {\r\n    return scores\r\n      .filter((x) => x.teamNumber === teamNumber)\r\n      .map((x) => x.score + x.penalty * 1000)\r\n      .reduce((prev, next) => prev + next);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (teams.length > 0 && scores.length > 0) {\r\n      setLoading(false);\r\n    }\r\n  }, [teams, scores]);\r\n\r\n  const getTeamDiv = (number) => {\r\n    const eventTeam = teams.find((x) => x.number === number);\r\n\r\n    if (!eventTeam) return <></>;\r\n\r\n    return (\r\n      <div className=\"d-inline-flex\">\r\n        <div className=\"align-self-center pe-2\">\r\n          <NrBadge value={number}></NrBadge>\r\n        </div>\r\n        <TeamDiv\r\n          team={{\r\n            driver: eventTeam.driver,\r\n            coDriver: eventTeam.coDriver,\r\n            club: eventTeam.club,\r\n            coClub: eventTeam.coClub,\r\n            teamName: eventTeam.teamName,\r\n          }}\r\n        ></TeamDiv>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Modal\r\n        show={show}\r\n        onHide={handleClose}\r\n        backdrop=\"static\"\r\n        keyboard={false}\r\n        size=\"xl\"\r\n      >\r\n        <Modal.Header closeButton className=\"bg-dark-green text-white\">\r\n          <Modal.Title className=\"text-white\">{`Porównanie wyników`}</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className=\"my-px-3\">\r\n          {loading ? (\r\n            <div className=\"text-center\">\r\n              <Spinner animation=\"border\" variant=\"secondary\" size=\"lg\" />\r\n            </div>\r\n          ) : markedNumbers.length !== 2 ? (\r\n            <h6 className=\"text-center pt-3\">\r\n              {markedNumbers.length < 2\r\n                ? \"Zaznacz 2 zawodników klikając na pomarańczowy numer startowy!\"\r\n                : `Porównanie możliwe tylko dla 2 zawodników - zaznaczyłeś ${markedNumbers.length}`}\r\n            </h6>\r\n          ) : (\r\n            <div>\r\n              <div\r\n                className=\"row pt-0 my-px-3\"\r\n                style={{ backgroundColor: \"lightgray\" }}\r\n              >\r\n                {markedNumbers.map((number) => {\r\n                  const eventTeam = teams.find((x) => x.number === number);\r\n                  const car = eventTeam?.car;\r\n                  return (\r\n                    <div\r\n                      className=\"col p-3 ps-4 d-inline-flex\"\r\n                      style={{ scale: \"1.1\" }}\r\n                    >\r\n                      {eventTeam && (\r\n                        <CarDiv\r\n                          line1={(car?.brand || \"\") + \" \" + (car?.model || \"\")}\r\n                          line2={eventTeam.carClass?.name}\r\n                          carBrand={car?.brand}\r\n                          driveType={car?.driveTypeEnum}\r\n                        ></CarDiv>\r\n                      )}\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n              <div className=\"row pt-1 px-3\">\r\n                <table className=\"table table-stripe\">\r\n                  <thead className=\"thead-dark\">\r\n                    <tr>\r\n                      <th style={{ width: \"10%\" }}>PS</th>\r\n                      <th\r\n                        style={{ width: \"38%\" }}\r\n                        className=\"text-end align-middle\"\r\n                      >\r\n                        {getTeamDiv(markedNumbers[0])}\r\n                      </th>\r\n                      <th className=\"text-start align-middle\">\r\n                        {getTeamDiv(markedNumbers[1])}\r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {psOptions.map((psOption, i) => {\r\n                      const bg = i % 2 === 0 ? \"bg-light-gray \" : \"\";\r\n                      let scoresLine = scores\r\n                        .filter((x) => x.stageId === Number(psOption.value))\r\n                        .sort((a, b) => (a.teamNumber < b.teamNumber ? -1 : 1));\r\n\r\n                      let totalScore1 =\r\n                        scoresLine[0]?.score + scoresLine[0]?.penalty * 1000;\r\n                      let totalScore2 =\r\n                        scoresLine[1]?.score + scoresLine[1]?.penalty * 1000;\r\n\r\n                      let sign =\r\n                        totalScore1 === totalScore2\r\n                          ? \"\"\r\n                          : totalScore1 > totalScore2\r\n                          ? \"+ \"\r\n                          : \"- \";\r\n\r\n                      return (\r\n                        <>\r\n                          <tr className={bg}>\r\n                            <th className=\"p-1\">\r\n                              <div style={{ marginRight: \"auto\" }}>\r\n                                <ScoreDivPenalty\r\n                                  line1={\"PS \" + (i + 1)}\r\n                                  line2={\"0\"}\r\n                                />\r\n                              </div>\r\n                            </th>\r\n                            {scoresLine.length == 2 && (\r\n                              <>\r\n                                <th\r\n                                  className={\r\n                                    \"text-end align-middle \" +\r\n                                    (totalScore1 < totalScore2\r\n                                      ? \"text-success\"\r\n                                      : \"fw-normal\")\r\n                                  }\r\n                                >\r\n                                  <LightScoreDiv\r\n                                    line1={timeToString(Math.abs(totalScore1))}\r\n                                    line3={\r\n                                      totalScore1 > totalScore2\r\n                                        ? \"+\" +\r\n                                          timeToString(\r\n                                            totalScore1 - totalScore2\r\n                                          )\r\n                                        : \"\"\r\n                                    }\r\n                                  />\r\n                                </th>\r\n                                <th\r\n                                  className={\r\n                                    \"align-middle \" +\r\n                                    (totalScore1 > totalScore2\r\n                                      ? \"text-success\"\r\n                                      : \"fw-normal\")\r\n                                  }\r\n                                >\r\n                                  <LightScoreDiv\r\n                                    line1={timeToString(Math.abs(totalScore2))}\r\n                                    line3={\r\n                                      totalScore1 < totalScore2\r\n                                        ? \"+\" +\r\n                                          timeToString(\r\n                                            totalScore2 - totalScore1\r\n                                          )\r\n                                        : \"\"\r\n                                    }\r\n                                  />\r\n                                </th>\r\n                              </>\r\n                            )}\r\n                          </tr>\r\n                        </>\r\n                      );\r\n                    })}\r\n                  </tbody>\r\n\r\n                  {markedNumbers.length == 2 && scores.length > 0 && (\r\n                    <tfoot>\r\n                      <tr>\r\n                        <th className=\"p-1\">\r\n                          <ScoreDivPenalty line1={\"Suma\"} line2={\"0\"} />\r\n                        </th>\r\n                        <th\r\n                          className={\r\n                            \"text-end fw-normal \" +\r\n                            (sumByTeamNumber(markedNumbers[0]) <\r\n                            sumByTeamNumber(markedNumbers[1])\r\n                              ? \"text-success\"\r\n                              : \"\")\r\n                          }\r\n                        >\r\n                          <ScoreDiv\r\n                            line1={timeToString(\r\n                              sumByTeamNumber(markedNumbers[0])\r\n                            )}\r\n                            line2={\r\n                              sumByTeamNumber(markedNumbers[0]) >\r\n                              sumByTeamNumber(markedNumbers[1])\r\n                                ? \"+\" +\r\n                                  timeToString(\r\n                                    sumByTeamNumber(markedNumbers[0]) -\r\n                                      sumByTeamNumber(markedNumbers[1])\r\n                                  )\r\n                                : \"\"\r\n                            }\r\n                          />\r\n                        </th>\r\n                        <th\r\n                          className={\r\n                            \"fw-normal \" +\r\n                            (sumByTeamNumber(markedNumbers[0]) >\r\n                            sumByTeamNumber(markedNumbers[1])\r\n                              ? \"text-success\"\r\n                              : \"\")\r\n                          }\r\n                        >\r\n                          <ScoreDiv\r\n                            line1={timeToString(\r\n                              sumByTeamNumber(markedNumbers[1])\r\n                            )}\r\n                            line2={\r\n                              sumByTeamNumber(markedNumbers[0]) <\r\n                              sumByTeamNumber(markedNumbers[1])\r\n                                ? \"+\" +\r\n                                  timeToString(\r\n                                    sumByTeamNumber(markedNumbers[1]) -\r\n                                      sumByTeamNumber(markedNumbers[0])\r\n                                  )\r\n                                : \"\"\r\n                            }\r\n                          />\r\n                        </th>\r\n                      </tr>\r\n                    </tfoot>\r\n                  )}\r\n                </table>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </Modal.Body>\r\n        <Modal.Footer className={\"justify-content-center\"}>\r\n          <div className=\"d-flex\">\r\n            <Button className={\"m-1\"} variant=\"secondary\" onClick={handleClose}>\r\n              Wyjdź\r\n            </Button>\r\n          </div>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n","/* eslint-disable react/display-name */\r\nimport React, { useState, useMemo, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport ResultTable from \"../common/table/ResultTable\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport { ScoreDiv, ScoreDivPenalty, TeamDiv, CarDiv } from \"../common/Div\";\r\nimport { Selector } from \"../common/Selector\";\r\nimport { backendUrl, checkReferee, fetchPsOptions } from \"../utils/fetchUtils\";\r\nimport PenaltyTable from \"../tables/PenaltyTable\";\r\nimport DisqualificationTable from \"../tables/DisqualificationTable\";\r\nimport { NrBadge } from \"../common/NrBadge\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport { MyButton } from \"../common/Button\";\r\nimport { calcTimeTo } from \"../utils/utils\";\r\nimport Tabs from \"react-bootstrap/Tabs\";\r\nimport Tab from \"react-bootstrap/Tab\";\r\nimport { CompareScoresModal } from \"../scores/CompareScoresModal\";\r\nimport {\r\n  useGetScoresQuery,\r\n  useGetSummedScoresQuery,\r\n} from \"../../service/rtk-fetch-api\";\r\n\r\nconst StageScorePage = (props) => {\r\n  const [activeTab, setActiveTab] = useState(1);\r\n  const [markedNumbers, setMarkedNumbers] = useState([]);\r\n  const [showCompareScoresModal, setShowCompareScoresModal] = useState(false);\r\n  const location = useLocation();\r\n  const eventRedirect = useLocation().search;\r\n  const index = eventRedirect.includes(\"&\")\r\n    ? eventRedirect.indexOf(\"&\")\r\n    : eventRedirect.length;\r\n  const eventFromRedirect = eventRedirect.substring(0, index).replace(\"?\", \"\");\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const eventId = eventFromRedirect\r\n    ? eventFromRedirect\r\n    : localStorage.getItem(\"eventId\") || location.state?.eventId;\r\n\r\n  const GENERAL = \"GENERALNA\";\r\n  const GUEST = \"GOŚĆ\";\r\n\r\n  const [event, setEvent] = useState();\r\n\r\n  // const [scores, setScores] = useState([]);\r\n  const [scoresByClass, setScoresByClass] = useState([]);\r\n  const [referee, setReferee] = useState(false);\r\n\r\n  // const [summedScores, setSummedScores] = useState([]);\r\n  const [summedScoresByClass, setSummedScoresByClass] = useState([]);\r\n\r\n  const [psOptions, setPsOptions] = useState([]);\r\n  const [classesOptions, setClassesOptions] = useState([]);\r\n\r\n  const [currentClass, setCurrentClass] = useState(GENERAL);\r\n  const [stage, setStage] = useState();\r\n\r\n  const [stageName, setStageName] = useState(\"\");\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [loadingScoreFile, setLoadingScoreFile] = useState(false);\r\n\r\n  const {\r\n    data: scores = [],\r\n    isFetching,\r\n    refetch: scoresRefetch,\r\n  } = useGetScoresQuery(stage, {\r\n    skip: stage === undefined,\r\n  });\r\n\r\n  const {\r\n    data: summedScores = [],\r\n    isFetching: summedScoresFetching,\r\n    refetch: summedScoreRefetch,\r\n  } = useGetSummedScoresQuery(\r\n    { eventId: eventId, stageId: stage },\r\n    {\r\n      skip: stage === undefined || eventId === undefined,\r\n    }\r\n  );\r\n\r\n  const fetchPsOptionsFnc = () => {\r\n    fetchPsOptions(eventId, (data) => {\r\n      setPsOptions(data.psOptions || []);\r\n      setClassesOptions(data.classesOptions || []);\r\n    });\r\n  };\r\n\r\n  const fetchEvent = () => {\r\n    axios\r\n      .get(`${backendUrl()}/event/getBasicEvent?eventId=${eventId}`)\r\n      .then((res) => {\r\n        setEvent({\r\n          ...res.data,\r\n          date: new Date(res.data.date),\r\n          signDeadline: new Date(res.data.signDeadline),\r\n        });\r\n      });\r\n  };\r\n\r\n  const fetchData = () => {\r\n    if (stage !== undefined) {\r\n      fetchEvent();\r\n    }\r\n  };\r\n\r\n  const getScoresFile = () => {\r\n    // setLoadingScoreFile(true);\r\n    window.open(\r\n      `${backendUrl()}/file/getScoresFile?eventId=${eventId}`,\r\n      \"_blank\"\r\n    );\r\n    // download(\r\n    //   `${backendUrl()}/file/getScoresFile?eventId=${eventId}`,\r\n    //   \"wyniki_\" + event.name + \".xlsx\",\r\n    //   () => setLoadingScoreFile(false)\r\n    // );\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (eventId === undefined) navigate(\"/\");\r\n    checkReferee(eventId, setReferee);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n    setScoresByClass([]);\r\n    setSummedScoresByClass([]);\r\n  }, [stage]);\r\n\r\n  useEffect(() => {\r\n    fetchPsOptionsFnc();\r\n    fetchData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isFetching || scores.length === 0) return;\r\n\r\n    const tempScores =\r\n      currentClass === `${GENERAL}+${GUEST}`\r\n        ? scores\r\n        : currentClass === GENERAL\r\n        ? scores.filter((x) => x.className !== GUEST)\r\n        : scores.filter(\r\n            (x) => x.className === currentClass || x.driveType === currentClass\r\n          );\r\n\r\n    setScoresByClass(calcTimeTo(tempScores));\r\n  }, [scores, currentClass]);\r\n\r\n  useEffect(() => {\r\n    if (summedScoresFetching || summedScores.length === 0) return;\r\n\r\n    let tempScores =\r\n      currentClass === `${GENERAL}+${GUEST}`\r\n        ? summedScores\r\n        : currentClass === GENERAL\r\n        ? summedScores.filter((x) => x.className !== GUEST)\r\n        : summedScores.filter(\r\n            (x) => x.className === currentClass || x.driveType === currentClass\r\n          );\r\n\r\n    setSummedScoresByClass(calcTimeTo(tempScores));\r\n  }, [summedScores, currentClass]);\r\n\r\n  const columns = useMemo(\r\n    () => [\r\n      {\r\n        width: \"5%\",\r\n        id: \"place\",\r\n        Header: \"P.\",\r\n        accessor: (cellInfo) => cellInfo.place,\r\n        disableFilters: true,\r\n        disableSortBy: true,\r\n        Cell: (row) => <> {row.row.index + 1}</>,\r\n      },\r\n      {\r\n        width: \"7%\",\r\n        id: \"nr\",\r\n        Header: \"Nr\",\r\n        accessor: (cellInfo) => cellInfo.number,\r\n        disableFilters: true,\r\n        disableSortBy: true,\r\n        Cell: (row) => (\r\n          <NrBadge\r\n            value={row.value}\r\n            isBold={markedNumbers.includes(row.value)}\r\n            onClick={() => handleMarked(row.value)}\r\n          ></NrBadge>\r\n        ),\r\n      },\r\n      {\r\n        width: \"30%\",\r\n        id: \"team\",\r\n        Header: \"Załoga\",\r\n        disableFilters: true,\r\n        disableSortBy: true,\r\n        Cell: (cellInfo) => <TeamDiv team={cellInfo.row.original} />,\r\n      },\r\n      {\r\n        width: \"30%\",\r\n        id: \"car\",\r\n        Header: \"Samochód\",\r\n        disableFilters: true,\r\n        disableSortBy: true,\r\n        Cell: (cellInfo) => (\r\n          <CarDiv\r\n            line1={cellInfo.row.original.car}\r\n            line2={cellInfo.row.original.className}\r\n            carBrand={cellInfo.row.original.brand}\r\n            driveType={cellInfo.row.original.driveType}\r\n          />\r\n        ),\r\n      },\r\n      {\r\n        width: \"15%\",\r\n        id: \"score\",\r\n        Header: \"Czas / kary\",\r\n        accessor: (cellInfo) => cellInfo.stageScore,\r\n        disableFilters: true,\r\n        disableSortBy: true,\r\n        Cell: (cellInfo) => (\r\n          <ScoreDivPenalty\r\n            line1={cellInfo.row.original.stageScore}\r\n            line2={cellInfo.row.original.totalPenalty}\r\n          />\r\n        ),\r\n      },\r\n      {\r\n        width: \"15%\",\r\n        id: \"result\",\r\n        Header: \"Wynik / straty\",\r\n        accessor: (cellInfo) => cellInfo.stageScore,\r\n        disableFilters: true,\r\n        disableSortBy: true,\r\n        Cell: (cellInfo) => (\r\n          <ScoreDiv\r\n            line1={cellInfo.row.original.totalTime}\r\n            line2={cellInfo.row.original.timeTo}\r\n            line3={cellInfo.row.original.timeToFirst}\r\n          />\r\n        ),\r\n      },\r\n    ],\r\n    []\r\n  );\r\n\r\n  const handleMarked = (number) => {\r\n    if (!markedNumbers.includes(number)) markedNumbers.push(number);\r\n    else markedNumbers.splice(markedNumbers.indexOf(number), 1);\r\n\r\n    setMarkedNumbers(Array.from(markedNumbers));\r\n  };\r\n\r\n  const highlightRow = (row) => {\r\n    if (markedNumbers.includes(row.values.nr)) return \"#c9e9a7\";\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"row card-body mx-0\">\r\n        <h4>{event?.name || \"\"}</h4>\r\n        <div className=\"col-xl-8 d-flex justify-content-center\">\r\n          {(event?.logoPathFile || event?.logoPath) && (\r\n            <div className=\"col-6 align-self-center\">\r\n              <div className=\"m-0 text-center\">\r\n                {event.logoPathFile ? (\r\n                  <img\r\n                    id={\"eventImage\" + event.eventId}\r\n                    style={{ maxHeight: \"150px\" }}\r\n                    className=\"img-fluid rounded float-left\"\r\n                    src={\"data:image/jpg;base64,\" + event.logoPathFile}\r\n                    alt=\"Logo\"\r\n                  ></img>\r\n                ) : (\r\n                  <img\r\n                    style={{ maxHeight: \"150px\" }}\r\n                    className=\"img-fluid rounded float-left\"\r\n                    src={event.logoPath}\r\n                    alt=\"Logo\"\r\n                  ></img>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n          <div className=\"col-6\">\r\n            <Selector\r\n              label={\"Klasyfikacja\"}\r\n              options={classesOptions}\r\n              handleChange={(value) => {\r\n                setCurrentClass(\r\n                  classesOptions.find((e) => e.value === value).label\r\n                );\r\n              }}\r\n              isValid={true}\r\n            />\r\n            <Selector\r\n              label={\"PS\"}\r\n              options={psOptions}\r\n              value={sessionStorage.getItem(\"scoreStageId\")}\r\n              handleChange={(value) => {\r\n                setStage(value);\r\n                setStageName(psOptions.find((e) => e.value === value).label);\r\n                sessionStorage.setItem(\"scoreStageId\", value);\r\n              }}\r\n              isValid={true}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"col-xl-4\">\r\n          <div className=\"m-2 text-center\">\r\n            {referee && (\r\n              <>\r\n                <Button\r\n                  className={\"m-1\"}\r\n                  variant=\"success\"\r\n                  onClick={() =>\r\n                    navigate(`/add_score`, {\r\n                      state: { eventId: eventId },\r\n                    })\r\n                  }\r\n                >\r\n                  Dodaj wynik\r\n                </Button>\r\n                <Button\r\n                  className={\"m-1\"}\r\n                  variant=\"primary\"\r\n                  onClick={() =>\r\n                    navigate(`/add_penalty`, {\r\n                      state: { eventId: eventId },\r\n                    })\r\n                  }\r\n                >\r\n                  Dodaj kare\r\n                </Button>\r\n                <MyButton\r\n                  variant=\"secondary\"\r\n                  isLoading={loadingScoreFile}\r\n                  onClick={() => getScoresFile()}\r\n                  msg=\"Generuj plik z zestawieniem wyników\"\r\n                  loadingMsg=\"Trwa generowanie\r\n                  pliku z wynikami\"\r\n                />\r\n              </>\r\n            )}\r\n            <Button\r\n              className={\"m-1\"}\r\n              variant=\"primary\"\r\n              onClick={() => {\r\n                summedScoreRefetch();\r\n                scoresRefetch();\r\n              }}\r\n            >\r\n              Odśwież\r\n            </Button>\r\n            <Button\r\n              className={\"m-1\"}\r\n              variant=\"success\"\r\n              onClick={() => setShowCompareScoresModal(true)}\r\n            >\r\n              Porównaj wyniki\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"row pt-0 mx-0 card-body\">\r\n        <div\r\n          className=\"fw-bold alert alert-secondary p-1 mb-2\"\r\n          role=\"alert\"\r\n        >{`${stageName}`}</div>\r\n        <Tabs\r\n          activeKey={activeTab}\r\n          onSelect={(key) => setActiveTab(key)}\r\n          className=\"mb-1 fw-bold text-dark device-small\"\r\n        >\r\n          <Tab eventKey={1} title=\"Czas NA\" className=\"custom-tab\">\r\n            <div className=\"my-pe-1\">\r\n              <div className=\"shadow bg-body rounded\">\r\n                <ResultTable\r\n                  columns={columns}\r\n                  data={scoresByClass}\r\n                  pageCount={3}\r\n                  isLoading={isFetching}\r\n                  isFooter={false}\r\n                  isHeader={true}\r\n                  cursor={\"pointer\"}\r\n                  manualPagination={true}\r\n                  highlightRow={(row) => highlightRow(row)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </Tab>\r\n          <Tab eventKey={2} title=\"Suma PO\" className=\"custom-tab\">\r\n            <div className=\"my-ps-1\">\r\n              <div className=\"shadow bg-body rounded\">\r\n                <ResultTable\r\n                  columns={columns}\r\n                  data={summedScoresByClass}\r\n                  pageCount={3}\r\n                  isLoading={summedScoresFetching}\r\n                  isFooter={false}\r\n                  isHeader={true}\r\n                  cursor={\"pointer\"}\r\n                  manualPagination={true}\r\n                  highlightRow={(row) => highlightRow(row)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </Tab>\r\n        </Tabs>\r\n        <div className=\"col-xl-12 px-1\">\r\n          <div className=\"shadow bg-body rounded mt-4 p-0\">\r\n            <div className=\"fw-bold alert alert-secondary p-1 m-0\" role=\"alert\">\r\n              {\"Kary\"}\r\n            </div>\r\n            <PenaltyTable\r\n              eventId={eventId}\r\n              onRemove={fetchData}\r\n              referee={referee}\r\n            />\r\n          </div>\r\n          <div className=\"shadow bg-body rounded mt-4\">\r\n            <div className=\"fw-bold alert alert-secondary p-1 m-0\" role=\"alert\">\r\n              {`Dyskwalifikacje / Wycofania`}\r\n            </div>\r\n            <DisqualificationTable\r\n              eventId={eventId}\r\n              onRemove={fetchData}\r\n              referee={referee}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {showCompareScoresModal && (\r\n        <CompareScoresModal\r\n          show={true}\r\n          handleClose={() => setShowCompareScoresModal()}\r\n          eventId={eventId}\r\n          markedNumbers={markedNumbers.sort((a, b) => (a < b ? -1 : 1))}\r\n          psOptions={psOptions}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default StageScorePage;\r\n"],"names":["props","useState","penalties","setPenalties","isLoading","setIsLoading","fetchPenalties","axios","backendUrl","eventId","then","res","data","useEffect","columns","useMemo","width","id","Header","disableFilters","disableSortBy","Cell","cellInfo","className","NrBadge","value","row","original","number","team","map","penalty","style","description","penaltySec","name","referee","icon","faTimesCircle","onClick","penaltyId","headers","authHeader","onRemove","title","ResultTable","pageCount","isFooter","isHeader","cursor","manualPagination","accessor","CompareScoresModal","show","handleClose","markedNumbers","psOptions","loading","setLoading","scores","setScores","teams","setTeams","closeOnBack","length","fetchTeams","fetchGetCompareScores","undefined","sumByTeamNumber","teamNumber","filter","x","score","reduce","prev","next","getTeamDiv","eventTeam","find","driver","coDriver","club","coClub","teamName","Modal","onHide","backdrop","keyboard","size","closeButton","Spinner","animation","variant","backgroundColor","car","scale","line1","brand","model","line2","carClass","carBrand","driveType","driveTypeEnum","psOption","i","bg","scoresLine","stageId","Number","sort","a","b","totalScore1","totalScore2","marginRight","timeToString","Math","abs","line3","Button","activeTab","setActiveTab","setMarkedNumbers","showCompareScoresModal","setShowCompareScoresModal","location","useLocation","eventRedirect","search","index","includes","indexOf","eventFromRedirect","substring","replace","navigate","useNavigate","localStorage","getItem","state","GENERAL","GUEST","event","setEvent","scoresByClass","setScoresByClass","setReferee","summedScoresByClass","setSummedScoresByClass","setPsOptions","classesOptions","setClassesOptions","currentClass","setCurrentClass","stage","setStage","stageName","setStageName","loadingScoreFile","useGetScoresQuery","skip","isFetching","scoresRefetch","refetch","useGetSummedScoresQuery","summedScores","summedScoresFetching","summedScoreRefetch","fetchData","date","Date","signDeadline","checkReferee","fetchPsOptions","tempScores","calcTimeTo","place","isBold","handleMarked","stageScore","totalPenalty","totalTime","timeTo","timeToFirst","splice","push","Array","from","highlightRow","values","nr","logoPathFile","logoPath","maxHeight","src","alt","Selector","label","options","handleChange","e","isValid","sessionStorage","setItem","window","open","msg","loadingMsg","role","Tabs","activeKey","onSelect","key","Tab","eventKey"],"sourceRoot":""}