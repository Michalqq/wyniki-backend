"use strict";(self.webpackChunkjavascript=self.webpackChunkjavascript||[]).push([[229],{2763:function(e,t,a){a.d(t,{E:function(){return o},O:function(){return l}});var n=a(7294),r=a(5005),c=a(6968),l=function(e){var t=e.variant,a=e.onClick,l=e.disabled,o=void 0!==l&&l,i=e.isLoading,u=e.msg,s=e.loadingMsg;return n.createElement(r.Z,{className:"m-1",variant:t,onClick:a,disabled:i||o},i?n.createElement(n.Fragment,null,n.createElement(c.Z,{size:"sm",animation:"border"})," "," "+s):n.createElement(n.Fragment,null,u))},o=function(e){var t=e.onClick,a=e.label,r=e.isConfirmed,c=void 0!==r&&r,l=e.name,o=e.value;return n.createElement("div",{className:"form-check"},n.createElement("input",{onClick:t,defaultChecked:c,className:"form-check-input",type:"radio",name:l,value:o}),n.createElement("label",{className:"form-check-label"},a))}},8229:function(e,t,a){a.r(t),a.d(t,{AddScorePage:function(){return g}});var n=a(7294),r=a(6668),c=a(9669),l=a.n(c),o=a(7577),i=a(2763),u=a(9942),s=a(6974),d=a(9952),m=a(5005),f=a(7091);function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,c=[],l=!0,o=!1;try{for(a=a.call(e);!(l=(n=a.next()).done)&&(c.push(n.value),!t||c.length!==t);l=!0);}catch(e){o=!0,r=e}finally{try{l||null==a.return||a.return()}finally{if(o)throw r}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var g=function(e){var t,a=(0,s.TH)(),c=(0,s.s0)(),b=a.state.eventId,g=[{value:"NEW",desc:"Wprowadzanie nowych wyników"},{value:"EDIT",desc:"Tryb edycji wyników"}],y=v((0,n.useState)(""),2),p=y[0],h=y[1],E=v((0,n.useState)(g[0].value),2),S=E[0],k=E[1],w=v((0,n.useState)(),2),C=w[0],N=w[1],I=v((0,n.useState)([]),2),x=I[0],z=I[1],A=v((0,n.useState)([]),2),Z=A[0],T=A[1],j=v((0,n.useState)(),2),P=j[0],M=(j[1],v((0,n.useState)(),2)),O=M[0],W=(M[1],v((0,n.useState)(),2)),K=W[0],L=W[1],U=v((0,n.useState)(),2),D=U[0],F=U[1],Q=v((0,n.useState)(),2),V=Q[0],H=Q[1],$=v((0,n.useState)(),2),_=$[0],q=$[1],B=v((0,n.useState)(),2),G=B[0],J=B[1],R=v((0,n.useState)(!1),2),X=R[0],Y=R[1],ee=v((0,n.useState)(!1),2),te=ee[0],ae=ee[1],ne=v((0,n.useState)(!0),2),re=ne[0],ce=ne[1],le=v((0,n.useState)(!1),2),oe=le[0],ie=le[1],ue=v((0,n.useState)(!1),2),se=ue[0],de=ue[1],me=function(){Y(!0),l().get("".concat((0,u.AC)(),"/team/getTeamOptions?eventId=").concat(b,"&stageId=").concat(G,"&mode=").concat(S),{headers:(0,d.Z)()}).then((function(e){T(e.data),Y(!1),ae(!1),0===e.data.length&&(be(),h("Wszystkie wyniki wybranego odcinka zostały wprowadzone"))}))};(0,n.useEffect)((function(){void 0===b&&c("/"),l().get("".concat((0,u.AC)(),"/event/getPsOptions?eventId=").concat(b),{headers:(0,d.Z)()}).then((function(e){var t;z(e.data),J(null===(t=e.data[0])||void 0===t?void 0:t.value)}))}),[]),(0,n.useEffect)((function(){x.length>0&&void 0!==G&&me()}),[G,x]),(0,n.useEffect)((function(){if(0!==Z.length){var e=Z.find((function(e){return e.value===_}));q(e?null==e?void 0:e.value:Z[0].value)}}),[Z]),(0,n.useEffect)((function(){void 0!==_&&S===g[1].value&&fe()}),[_,S]),(0,n.useEffect)((function(){void 0!==G&&me()}),[S]);var fe=function(){l().get("".concat((0,u.AC)(),"/score/getTeamScore?eventId=").concat(b,"&stageId=").concat(G,"&teamId=").concat(_)).then((function(e){L(e.data.scoreMin),F(e.data.scoreSec),H(e.data.scoreMiliSec),N(e.data.stageScoreId)}))},ve=function(e){e.target.checked&&S!==e.target.value&&(k(e.target.value),be(),T([]))},be=function(){ae(!0),L(""),F(""),H("")};return n.createElement("div",{className:"u-text-center  card-body pb-5"},n.createElement("div",{className:"u-box-shadow"},n.createElement("div",{className:"col-xl-12"},n.createElement("h5",{className:"pb-1 mb-0 border-bottom"},"Dodaj wynik:")),n.createElement("div",{className:"row justify-content-center"},n.createElement("div",{className:"col-lg-4 pb-1 border-bottom"},n.createElement("div",{className:"centered-grid form-group "},n.createElement(i.E,{label:g[0].desc,value:g[0].value,isConfirmed:S===g[0].value,onClick:function(e){return ve(e)},name:"editMode"}),n.createElement(i.E,{label:g[1].desc,value:g[1].value,isConfirmed:!1,onClick:function(e){return ve(e)},name:"editMode"})),n.createElement("div",{className:"pb-0"}),n.createElement(r.Q,{label:"Odcinek PS",options:x,value:sessionStorage.getItem("refereeStageId"),handleChange:function(e){J(e),sessionStorage.setItem("refereeStageId",e)},isValid:!0}),n.createElement(r.Q,{label:"Załoga",options:Z,value:_,handleChange:function(e){return q(e)},isValid:!0,isLoading:X})),n.createElement("div",{className:"col-lg-4 pb-1 border-bottom"},n.createElement("div",{className:"row"},n.createElement("div",{className:"col-xl-12"},n.createElement("h5",{className:"mb-0"},"Czas"),n.createElement("div",{className:"inline-flex"},n.createElement(o.K,{label:"Minuty",inputPlaceholder:"00",value:K,handleChange:function(e){return L(e.target.value)},disabled:te,onlyNumber:!0,type:"number"}),n.createElement(o.K,{label:"Sekundy",inputPlaceholder:"00",value:D,handleChange:function(e){return F(e.target.value)},disabled:te,onlyNumber:!0,max:59,type:"number"}),n.createElement(o.K,{label:"Setne",inputPlaceholder:"00",value:V,handleChange:function(e){return H(e.target.value)},disabled:te,onlyNumber:!0,max:99,type:"number"})),n.createElement("div",{className:"col-xl-12 pt-1 fw-bolder"},p),n.createElement("div",{className:"col-xl-12 pt-1 fw-bolder"},re),n.createElement("div",{className:"col-xl-12 pt-2"},n.createElement("button",{type:"button",className:"btn btn-success mx-2 py-1",onClick:function(){if(null==K||""===K||null==D||""===D||null==V||""===V)ce("Wprowadź pełny wynik");else{ce();var e=60*P+O,t=60*Number(K)*1e3+1e3*Number(D)+10*Number(V);a={teamId:_,stageId:G,stageStartTime:e,score:t,stageScoreId:S===g[1].value?C:null},l().post("".concat((0,u.AC)(),"/score/addScore"),a,{headers:(0,d.Z)()}).then((function(e){me(),h(e.data),setTimeout((function(){return h()}),1e4)})),be()}var a},disabled:te},"Zapisz wynik"),S===g[1].value&&n.createElement("button",{type:"button",className:"btn btn-danger mx-2",onClick:function(){return ie(!0)},disabled:te},"Usuń wynik"))))))),n.createElement("div",{className:"col-sm pt-3"}),n.createElement(i.O,{variant:"secondary",isLoading:se,onClick:function(){return de(!0),void l().post("".concat((0,u.AC)(),"/score/calculateTariff?eventId=").concat(b),{headers:(0,d.Z)()}).then((function(e){de(!1)}))},msg:"Przelicz wszystkie taryfy",loadingMsg:"Przeliczanie taryf"}),n.createElement(m.Z,{className:"mx-2 py-1 px-2",variant:"primary",onClick:function(){return c("/add_penalty",{state:{eventId:b}})}},"Przejdź do dodawania kar"),n.createElement(m.Z,{className:"mx-2 py-1 px-2",variant:"success",onClick:function(){return c("/event",{state:{eventId:b}})}},"Wyniki"),oe&&n.createElement(f.m,{show:!0,title:"Usuwanie załogi",text:"Czy napewno chcesz usunąć wynik załogi:  ".concat(null===(t=Z.find((function(e){return e.value===_})))||void 0===t?void 0:t.label),handleAccept:function(){var e;e={teamId:_,stageId:G,stageScoreId:S===g[1].value?C:null},l().post("".concat((0,u.AC)(),"/score/removeScore"),e,{headers:(0,d.Z)()}).then((function(e){me(),h(e.data),setTimeout((function(){return h()}),1e4)})),ie(!1)},handleClose:function(){ie(!1)}}))};t.default=g}}]);
//# sourceMappingURL=229.js.map