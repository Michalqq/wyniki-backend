"use strict";(self.webpackChunkjavascript=self.webpackChunkjavascript||[]).push([[226],{4226:function(e,t,n){n.r(t),n.d(t,{default:function(){return Pe}});var a=n(7294),r=n(9669),l=n.n(r),c=n(6974),i=n(9942),o=n(5005),s=n(1881),u=n(5147),d=n(6025),m=n(7577),f=n(8678),v=n(9198),p=n(9546),y=n(7625),E=n(1436),h=n(6668),g=n(9952),b=n(7091),w=n(7648),C=n(7182);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return l}}(e,t)||z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var S=function(e){var t=e.show,n=e.handleClose,r=e.event,c=j((0,a.useState)({name:"",headDescription:"",description:"",footerDescription:"",date:new Date,signDeadline:new Date,admin:1,stages:[],organizer:"",logoPath:"",awdClassification:!1,rwdClassification:!1,fwdClassification:!1,pzm:!0}),2),N=c[0],S=c[1],O=j((0,a.useState)({index:0,name:"",distance:1.5,startTime:new Date,startFrequency:1}),2),Z=O[0],D=O[1],A=j((0,a.useState)({carClassId:0,carClassName:null,maxEngineCapacity:null,eventId:null==r?void 0:r.eventId,awd:!1}),2),P=A[0],F=A[1],T=j((0,a.useState)([]),2),H=T[0],K=T[1],M=j((0,a.useState)({eventId:null==r?void 0:r.eventId,path:"",description:""}),2),B=M[0],L=M[1],Y=j((0,a.useState)([]),2),U=Y[0],G=Y[1],W=j((0,a.useState)({eventId:null==r?void 0:r.eventId,file:"",fileName:"",description:""}),2),R=W[0],q=W[1],$=j((0,a.useState)(),2),V=$[0],J=$[1],Q=j((0,a.useState)([]),2),_=Q[0],X=Q[1],ee=j((0,a.useState)([]),2),te=ee[0],ne=ee[1],ae=j((0,a.useState)([]),2),re=ae[0],le=ae[1],ce=j((0,a.useState)([]),2),ie=ce[0],oe=ce[1],se=j((0,a.useState)([]),2),ue=se[0],de=se[1],me=j((0,a.useState)(!1),2),fe=me[0],ve=me[1];(0,a.useEffect)((function(){t&&((0,C.CE)(n),l().get("".concat((0,i.AC)(),"/event/getRefereeOptions"),{headers:(0,g.Z)()}).then((function(e){le(e.data)})),l().get("".concat((0,i.AC)(),"/event/getEventClassesOptions"),{headers:(0,g.Z)()}).then((function(e){de(e.data)})),oe([]),ne([]),X([]),void 0!==r&&Ee())}),[t]);var pe=function(e){S(k(k({},N),{},x({},e.target.name,e.target.value)))},ye=function(e){D(k(k({},Z),{},x({},e.target.name,e.target.value)))},Ee=function(){l().get("".concat((0,i.AC)(),"/event/getEvent?eventId=").concat(r.eventId)).then((function(e){S(k(k({},e.data),{},{date:e.data.date?new Date(e.data.date):new Date,signDeadline:e.data.signDeadline?new Date(e.data.signDeadline):new Date})),X(e.data.stages.map((function(e){return k(k({},e),{},{startTime:new Date(e.startTime)})}))),ne(e.data.referee),oe(e.data.eventClasses.map((function(e){return k(k({},e),{},{carClassName:e.carClass.name})}))),K(e.data.eventPaths),G(e.data.eventFiles)}))},he=function(e){var t=e.className,n=e.children;return a.createElement(a.Fragment,null,a.createElement(v.CalendarContainer,{className:t},a.createElement("div",{style:{display:"flex"}},n)))};return a.createElement(s.Z,{show:t,onHide:n,backdrop:"static",keyboard:!1,size:"xl"},a.createElement(s.Z.Header,{className:"bg-dark-green text-white",closeButton:!0},a.createElement(s.Z.Title,null,"Dodawanie nowego wydarzenia")),a.createElement(s.Z.Body,null,a.createElement("div",{className:"row u-text-center justify-content-center"},a.createElement(d.Z.Body,{className:"py-0"},a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-4 px-1"},a.createElement(m.K,{label:"Nazwa",name:"name",handleChange:pe,big:!0,value:N.name,multiline:5})),a.createElement("div",{className:"col-lg-8 px-1"},a.createElement(m.K,{label:"Opis główny",name:"headDescription",handleChange:pe,big:!0,value:N.headDescription,multiline:5}))),a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-6 px-1"},a.createElement(m.K,{label:"Opis",name:"description",handleChange:pe,big:!0,value:N.description,multiline:5})),a.createElement("div",{className:"col-lg-6 px-1"},a.createElement(m.K,{label:"Opis stopka",name:"footerDescription",handleChange:pe,big:!0,value:N.footerDescription,multiline:5}))),a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-3 px-1"},a.createElement(m.K,{label:"Nazwa organizatora",name:"organizer",handleChange:pe,big:!0,value:N.organizer})),a.createElement("div",{className:"col-lg-3 px-1"},a.createElement(m.K,{label:"Ścieżka do logo wydarzenia",inputPlaceholder:"http://www.akteam.pl/logo.jpg",name:"logoPath",handleChange:pe,big:!0,value:N.logoPath})),a.createElement("div",{className:"col-lg-3 px-1"},a.createElement(f.z4,{label:"Data wydarzenia",onChange:function(e){return S(k(k({},N),{},{date:e}))},selected:N.date,calendarContainer:he,minDate:null,maxDate:null})),a.createElement("div",{className:"col-lg-3 px-1"},a.createElement(f.z4,{label:"Koniec zapisów",onChange:function(e){return S(k(k({},N),{},{signDeadline:e}))},selected:N.signDeadline,calendarContainer:he,minDate:new Date,maxDate:null}))),a.createElement(w.Z.Check,{label:"Informacja o PZM w dokumentach",name:"pzm",type:"checkbox",checked:N.pzm,onClick:function(e){return S(k(k({},N),{},{pzm:e.target.checked}))}})),a.createElement("div",{className:"col-lg-4 py-2  border-right shadow bg-white rounded"},a.createElement("div",{className:"col-lg-12 border-right rounded"},a.createElement(d.Z,{className:"text-center"},a.createElement(d.Z.Body,{className:"p-0"},a.createElement(h.Q,{label:"Sędziowie",options:re,handleChange:function(e){return n=e,a=re.find((function(e){return e.value===n})),r={userId:Number(a.value),username:a.label},void ne([].concat((t=te,function(e){if(Array.isArray(e))return I(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||z(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[r]));var t,n,a,r},isValid:!0,skipDefault:!0,searchable:!0}),a.createElement(u.Z,{responsive:!0},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Login"),a.createElement("th",{className:"text-end"},"Usuń"))),a.createElement("tbody",null,te.map((function(e,t){return a.createElement("tr",{key:e.userId+t},a.createElement("td",null,e.username),a.createElement("td",{className:"text-end"},a.createElement(y.G,{icon:E.nYk,onClick:function(){return t=e.userId,n=te.filter((function(e){return e.userId!==t})),void ne(n);var t,n},title:"Usuń załoge",cursor:"pointer"})))})))))),a.createElement(d.Z,{className:"text-center"},a.createElement(d.Z.Header,{className:"bg-dark-green text-white"},"Podział na klasy"),a.createElement(d.Z.Body,{className:"p-0"},a.createElement(u.Z,{responsive:!0},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Klasa"),a.createElement("th",null,"Max silnik [cm3]"),a.createElement("th",{className:"text-end"},"Usuń"))),a.createElement("tbody",null,ie.map((function(e,t){return a.createElement("tr",{key:e.carClassId+t},a.createElement("td",null,e.carClassName),a.createElement("td",null,e.maxEngineCapacity),a.createElement("td",{className:"text-end"},a.createElement(y.G,{icon:E.nYk,onClick:function(){return t=e.carClassId,n=ie.filter((function(e){return e.carClassId!==t})),void oe(n);var t,n},title:"Usuń klase",cursor:"pointer"})))})))),a.createElement("div",{className:"d-grid"},a.createElement(h.Q,{className:"w-50",label:"Klasa",options:ue,handleChange:function(e){return t=e,n=ue.find((function(e){return e.value===t})),void F(k(k({},P),{},{carClassId:t,carClassName:n.label}));var t,n},isValid:!0,value:P.carClassId,skipDefault:!0}),a.createElement(m.K,{label:"Max silnik [cm3]",name:"name",handleChange:function(e){return F(k(k({},P),{},{maxEngineCapacity:e.target.value}))},big:!0,value:P.maxEngineCapacity})),a.createElement(o.Z,{className:"px-4 my-3",variant:"success",onClick:function(){ie.push(P),F({carClassId:0,carClassName:null,maxEngineCapacity:"",eventId:null==r?void 0:r.eventId,awd:!1})}},"Dodaj klase"),a.createElement(w.Z.Check,{inline:!0,label:"Dodatkowa klasyfikacja AWD",name:"turbo",type:"checkbox",checked:N.awdClassification,onClick:function(e){return S(k(k({},N),{},{awdClassification:e.target.checked}))}}),a.createElement(w.Z.Check,{inline:!0,label:"Dodatkowa klasyfikacja RWD",name:"turbo",type:"checkbox",checked:N.rwdClassification,onClick:function(e){return S(k(k({},N),{},{rwdClassification:e.target.checked}))}}),a.createElement(w.Z.Check,{inline:!0,label:"Dodatkowa klasyfikacja FWD",name:"turbo",type:"checkbox",checked:N.fwdClassification,onClick:function(e){return S(k(k({},N),{},{fwdClassification:e.target.checked}))}}),a.createElement("div",{className:"mt-4"}),a.createElement(w.Z.Check,{inline:!0,label:"Klasy wybierane manualnie przy zapisach",name:"carClassManual",type:"checkbox",checked:N.carClassManual,onClick:function(e){return S(k(k({},N),{},{carClassManual:e.target.checked}))}}))),a.createElement(d.Z,{className:"text-center"},a.createElement(d.Z.Header,{className:"bg-dark-green text-white"},"Plik z logo wydarzenia"),a.createElement(d.Z.Body,{className:"p-1"},a.createElement("input",{type:"file",name:"logoPathFile",accept:"image/jpg",onChange:function(e){return function(e){var t=e.target.files[0],n=new FormData;n.append("file",t),J(n)}(e)}}))))),a.createElement("div",{className:"col-lg-8 py-2 shadow mb-1 bg-white rounded"},a.createElement(d.Z,null,a.createElement(d.Z.Header,{className:"bg-dark-green text-white"},"Odcinki PS/OS (w kolejności)"),a.createElement(d.Z.Body,{className:"p-0"},_.length>0&&a.createElement(u.Z,{responsive:!0},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"#"),a.createElement("th",null,"Nazwa"),a.createElement("th",null,"Czas startu"),a.createElement("th",null,"Częstotliwość"),a.createElement("th",{className:"text-end"},"Usuń"))),a.createElement("tbody",null,_.map((function(e,t){return a.createElement("tr",{key:t},a.createElement("td",null,t),a.createElement("td",null,e.name),a.createElement("td",null,null===e.startTime?"":(0,p.default)(e.startTime,"HH:mm")),a.createElement("td",null,e.startFrequency+" min"),a.createElement("td",{className:"text-end"},a.createElement(y.G,{icon:E.nYk,onClick:function(){return t=e.stageId,n=_.filter((function(e){return e.stageId!==t})),void X(n);var t,n},title:"Usuń załoge",cursor:"pointer"})))})))),a.createElement("div",{className:"d-block"},a.createElement(m.K,{label:"Nazwa",name:"name",handleChange:ye,big:!0,value:Z.name})),a.createElement("div",{className:"row"},a.createElement("div",{className:"col-lg-3"},a.createElement(m.K,{label:"Długość [m]",name:"distance",handleChange:ye,big:!0,onlyNumber:!0,value:Z.distance})),a.createElement("div",{className:"col-lg-4"},a.createElement(f.jI,{label:"Czas startu odcinka",onChange:function(e){D(k(k({},Z),{},{startTime:e}))},calendarContainer:he,minDate:new Date,maxDate:null})),a.createElement("div",{className:"col-lg-5"},a.createElement(m.K,{label:"Częstotliwość startów [min]",name:"startFrequency",handleChange:ye,big:!0,value:Z.startFrequency}))),a.createElement("div",{className:"text-center py-3"},a.createElement(o.Z,{className:"px-4 mx-3",variant:"success",onClick:function(){_.push(Z),X(_),D({index:Z.index+1,name:"",distance:"",startTime:new Date,startFrequency:1})}},"Dodaj odcinek")))),a.createElement(d.Z,{className:"text-center"},a.createElement(d.Z.Header,{className:"bg-dark-green text-white"},"Linki do regulaminow, informacji itd."),a.createElement(d.Z.Body,{className:"p-0"},a.createElement(u.Z,{responsive:!0},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Link"),a.createElement("th",null,"Opis"),a.createElement("th",{className:"text-end"},"Usuń"))),a.createElement("tbody",null,H.map((function(e,t){return a.createElement("tr",{key:t},a.createElement("td",null,e.path),a.createElement("td",null,e.description),a.createElement("td",{className:"text-end"},a.createElement(y.G,{icon:E.nYk,onClick:function(){return K(H.filter((function(t){return t.path!==e.path})))},title:"Usuń link",cursor:"pointer"})))})))),a.createElement("div",{className:"d-grid"},a.createElement(m.K,{label:"Link/ścieżka",name:"path",handleChange:function(e){return L(k(k({},B),{},{path:e.target.value}))},big:!0,value:B.path}),a.createElement(m.K,{label:"Opis",name:"description",handleChange:function(e){return L(k(k({},B),{},{description:e.target.value}))},big:!0,value:B.description})),a.createElement(o.Z,{className:"px-4 my-3",variant:"success",onClick:function(){H.push(B),L({eventId:null==r?void 0:r.eventId,path:"",description:""})},disabled:""===B.description||""===B.link},"Dodaj link"))),a.createElement(d.Z,{className:"text-center"},a.createElement(d.Z.Header,{className:"bg-dark-green text-white"},"Pliki"),a.createElement(d.Z.Body,{className:"p-0"},a.createElement(u.Z,{responsive:!0},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Plik"),a.createElement("th",null,"Opis"),a.createElement("th",{className:"text-end"},"Usuń"))),a.createElement("tbody",null,U.map((function(e,t){return a.createElement("tr",{key:t},a.createElement("td",null,e.fileName),a.createElement("td",null,e.description),a.createElement("td",{className:"text-end"},a.createElement(y.G,{icon:E.nYk,onClick:function(){var t;(t=e.id)&&l().post("".concat((0,i.AC)(),"/event/removeFileFromEvent?fileId=").concat(t,"&eventId=").concat(N.eventId),{headers:(0,g.Z)()}),G(U.filter((function(t){return t.fileName!==e.fileName})))},title:"Usuń plik",cursor:"pointer"})))})))),a.createElement("div",{className:"d-grid"},a.createElement("input",{type:"file",name:"file",accept:"application/pdf,application/vnd.ms-excel",onChange:function(e){return function(e){var t=e.target.files[0],n=new FormData;n.append("file",t),q(k(k({},R),{},{file:n,fileName:t.name}))}(e)}}),a.createElement(m.K,{label:"Opis",name:"description",handleChange:function(e){return q(k(k({},R),{},{description:e.target.value}))},big:!0,value:R.description})),a.createElement(o.Z,{className:"px-4 my-3",variant:"success",onClick:function(){U.push(R),q({eventId:null==r?void 0:r.eventId,file:"",fileName:"",description:""})},disabled:""===R.description||""===R.fileName},"Dodaj plik"))))),fe&&a.createElement(b.m,{show:!0,title:"Usuwanie wydarzenia",text:"Czy napewno chcesz usunąć wydarzenie? Operacja nieodwracalna",handleAccept:function(){l().get("".concat((0,i.AC)(),"/event/deleteEvent?eventId=").concat(r.eventId),{headers:(0,g.Z)()}).then((function(e){n()})),ve(!1)},handleClose:function(){return ve(!1)}})),a.createElement(s.Z.Footer,{className:"justify-content-center"},r&&a.createElement(o.Z,{className:"mx-3",variant:"secondary",onClick:function(){return ve(!0)}},"Usuń wydarzenie"),a.createElement(o.Z,{className:"mx-3",variant:"secondary",onClick:n},"Anuluj"),a.createElement(o.Z,{className:"px-4 mx-3",variant:"success",onClick:function(){var e=k(k({},N),{},{stages:_,referee:te,eventClasses:ie,eventPaths:H,eventFiles:[]});l().put("".concat((0,i.AC)(),"/event/createNew"),e).then((function(e){U.forEach((function(t){return l().post("".concat((0,i.AC)(),"/event/addFileToEvent?fileName=").concat(t.fileName,"&desc=").concat(t.description,"&eventId=").concat(e.data),t.file,{headers:(0,g.Z)()})})),V&&l().post("".concat((0,i.AC)(),"/event/addLogoFile?eventId=").concat(e.data),V,{headers:(0,g.Z)()})})),n()},disabled:0===_.length},"OK")))},O=n(381),Z=n.n(O),D=n(7977),A=function(e){var t=e.count,n=e.lPos,r=void 0===n?"-3vh":n,l=e.bg,c=void 0===l?"secondary":l,i=e.title,o=void 0===i?"":i;return a.createElement("div",{"data-bs-toggle":"tooltip",title:o,className:"user-select-none position-relative",style:{left:r,top:"-15px"}},t>0&&a.createElement(a.Fragment,null,a.createElement(D.Z,{className:"position-absolute",pill:!0,bg:c},t)))},P=n(1251),F=function(e){var t=e.event,n=e.onJoin,r=e.onTeamList,l=e.onScore,c=e.onEdit,i=e.onStatement,s=e.mainAdmin,u=(new Date).getTime()>new Date(t.signDeadline).getTime(),m=(0,P.VP)(t.eventId,{skip:void 0===t}).data,f=(0,P.kE)(t.eventId,{skip:void 0===t}).data,v=(0,P.K8)(t.eventId,{skip:void 0===t}).data,p=Z()(null==t?void 0:t.signDeadline).startOf("day").diff(Z()().startOf("day"),"days"),h=Z()(null==t?void 0:t.date).startOf("day").diff(Z()().startOf("day"),"days"),g=function(e){return 0===e?"DZISIAJ!":1===e?"jutro!":"za "+e+" dni"};return a.createElement("div",{className:"col-lg-6 py-1 px-1 no-opacity-hover opacity-90a"},a.createElement(d.Z,{className:"shadow-sm"},a.createElement(d.Z.Header,{className:"bg-secondary-green text-white text-start fw-bold py-1"},a.createElement("div",{className:"row px-1"},a.createElement("div",{className:"col-11 px-0"},null==t?void 0:t.name),a.createElement("div",{className:"col-1 px-0 text-end"},void 0!==c&&s&&a.createElement(y.G,{className:"text-white fa-lg",icon:E.Xcf,onClick:c,cursor:"pointer"})))),a.createElement(d.Z.Body,{className:"p-1"},a.createElement("div",{style:{whiteSpace:"break-spaces"},className:"position-absolute end-0 mx-1 badge bg-primary-green text-wrap fst-italic"},"".concat(Z()(null==t?void 0:t.date).format("dddd, DD MMM YYYY, HH:mm"),"\n            ").concat(h>=0?"("+g(h)+")":"")),a.createElement("div",{className:"container d-flex"},a.createElement("div",{className:"col-lg-4 px-0 align-self-center",style:{width:"200px",maxHeight:"150px",display:"flex"}},null!=m&&m.file?a.createElement("img",{id:"eventImage"+t.eventId,className:"img-fluid rounded float-left",style:{objectFit:"contain"},src:"data:image/jpg;base64,"+(null==m?void 0:m.file),alt:"Logo"}):t.logoPath&&a.createElement("img",{className:"img-fluid rounded float-left",style:{objectFit:"contain"},src:t.logoPath,alt:"Logo"})),a.createElement("div",{className:"col-lg-8 mt-3"},void 0!==t.organizer&&null!==t.organizer&&a.createElement("h6",{className:"m-3 "},"Organizator: ".concat(t.organizer)),new Date(null==t?void 0:t.signDeadline)>=new Date&&a.createElement(a.Fragment,null,a.createElement("h6",{style:{whiteSpace:"break-spaces"},className:"font13 fw-bold fst-italic mt-2"},"Koniec zapisów ".concat(g(p),"\n").concat(Z()(null==t?void 0:t.signDeadline).format("dddd, DD MMM YYYY, HH:mm")))),new Date(null==t?void 0:t.signDeadline)<new Date&&a.createElement("p",{className:"fw-bold fst-italic mt-2"},"Zapisy zamknięte"),t.joined&&a.createElement("div",{className:"d-inline-flex"},a.createElement(y.G,{className:"text-success fa-lg",icon:E.Tab}),a.createElement("h6",null,"Jesteś zapisany"))))),a.createElement(d.Z.Footer,{className:"text-start py-0 px-1"},a.createElement("div",{className:"row my-2 mx-0"},a.createElement("div",{className:"col-6 px-0"},a.createElement(o.Z,{className:"start-0 py-1 px-1 ",variant:"success",onClick:n},u?"Informacje":t.joined?"Moje zgłoszenie":"Info / Zgłoszenia")),a.createElement("div",{className:"col-6 px-0 d-flex justify-content-end"},a.createElement(o.Z,{className:"py-1 px-2 mx-1",variant:"dark",onClick:r},"Lista"),a.createElement(A,{count:v,lPos:"-3.5vh",bg:"primary",title:"Liczba zapisanych"}),a.createElement(o.Z,{className:"py-1 px-1 mx-1",variant:"warning",onClick:i},"Komunikaty"),a.createElement(A,{count:f,title:"Liczba komunikatów"}),a.createElement(o.Z,{className:"py-1 px-1 mx-1",variant:"success",onClick:l},"Wyniki"))))))},T=n(6968),H=n(496),K=n(3992),M=n(9661);function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Y=function(e){var t=e.show,n=e.handleClose,r=e.eventId,l=B((0,a.useState)([]),2),c=l[0],u=l[1],d=B((0,a.useState)("0"),2),m=d[0],f=d[1],v=(0,P.r6)(r,{skip:void 0===r}),p=v.data,g=void 0===p?[]:p,b=v.isFetching;(0,a.useEffect)((function(){t&&((0,C.CE)(n),w())}),[t]);var w=function(){(0,i.sH)(r,(function(e){var t=[{label:"WSZYSTKIE KLASY",value:"0",defValue:!0}];e.classesOptions.filter((function(e){return"GENERALNA"!==e.label&&"GENERALNA+GOŚĆ"!==e.label})).forEach((function(e){return t.push(e)})),u(t||[])}))},N=(0,a.useMemo)((function(){return[{width:"8%",id:"index",Header:"L.p",accessor:function(e){return e.number},disableFilters:!0,Cell:function(e){return a.createElement("div",{className:"ps-2"}," ",e.row.index+1)}},{width:"9%",id:"#",Header:"#Nr",accessor:function(e){return e.number},disableFilters:!0,Cell:function(e){return a.createElement(K.M,{value:e.value})}},{width:"30%",id:"team",Header:"Załoga",disableFilters:!0,Cell:function(e){return a.createElement(M.Ur,{team:{driver:e.row.original.driver,coDriver:e.row.original.coDriver,club:e.row.original.club,coClub:e.row.original.coClub,teamName:e.row.original.teamName}})}},{width:"30%",id:"car",Header:"Samochód",accessor:function(e){return e.car},disableFilters:!0,Cell:function(e){var t,n,r,l;return a.createElement(M.He,{line1:((null===(t=e.value)||void 0===t?void 0:t.brand)||"")+" "+((null===(n=e.value)||void 0===n?void 0:n.model)||""),line2:e.row.original.carClass.name,carBrand:null===(r=e.value)||void 0===r?void 0:r.brand,driveType:null===(l=e.value)||void 0===l?void 0:l.driveTypeEnum})}},{width:"11%",id:"engine",Header:"Silnik",accessor:function(e){return n=null!=(t=e.car)&&t.turbo?" (T)":"",(null==t?void 0:t.engineCapacity)+" cm3"+n;var t,n},disableFilters:!0},{width:"11%",id:"entryFee",Header:"Potwierdz.",accessor:function(e){return e.entryFeePaid},disableFilters:!0,Cell:function(e){return a.createElement(y.G,{icon:e.value?E.LEp:E.Psp,style:{color:e.value?"green":"black"},title:e.value?"Potwierdzony":"Dodaj potwierdzenie przelewu",cursor:"pointer"})}}]}),[]);return a.createElement(s.Z,{show:t,onHide:n,backdrop:"static",keyboard:!1,size:"xl"},a.createElement(s.Z.Header,{className:"bg-dark-green text-white",closeButton:!0},a.createElement(s.Z.Title,null,"Lista zapisanych")),a.createElement(s.Z.Body,{className:"px-0"},b&&a.createElement("div",{className:"text-center"},a.createElement(T.Z,{animation:"border",variant:"secondary",size:"lg"})),!b&&0===g.length&&a.createElement("h2",{className:"text-center"},"Brak zgłoszeń - bądź pierwszy!"),!b&&(null==g?void 0:g.length)>0&&a.createElement(a.Fragment,null,a.createElement("div",{className:"row pt-0 mx-0 card-body"},a.createElement("div",{className:"col-xl-4 px-0 pe-1"}),a.createElement("div",{className:"col-xl-4 px-0 pe-1"},a.createElement(h.Q,{label:"Filtruj klasami",options:c,handleChange:function(e){f(e)},isValid:!0}))),a.createElement(H.Z,{columns:N,data:"0"!==m?g.filter((function(e){return e.carClass.name===m||e.car.driveTypeEnum===m})):g,isLoading:!1,isFooter:!1,isHeader:!0,manualPagination:!0}))),a.createElement(s.Z.Footer,{className:"justify-content-center"},a.createElement("div",{className:"d-grid"},a.createElement(o.Z,{className:"m-1",variant:"secondary",onClick:n},"Anuluj"))))},U=n(5509),G=n(7905);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var J=function(e){var t=e.show,n=e.handleClose,r=e.eventId,c=$((0,a.useState)(),2),u=c[0],d=c[1],f=$((0,a.useState)(!1),2),v=f[0],p=f[1],y=$((0,a.useState)(),2),b=y[0],N=y[1],k=$((0,a.useState)({coSportLicense:!1,sportLicense:!1,birthDate:new Date,currentCar:{carId:null,brand:"",model:"",year:"",licensePlate:"",vin:"",engineCapacity:"",turbo:!1,driveType:"1",petrol:"BENZYNA",insurance:"",insuranceExpiryDate:new Date,carInspectionExpiryDate:new Date}}),2),x=k[0],j=k[1];return(0,a.useEffect)((function(){t&&((0,C.CE)(n),l().get("".concat((0,i.AC)(),"/team/getTeamOptionList")).then((function(e){N(e.data)})),j({coSportLicense:!1,sportLicense:!1,birthDate:new Date,currentCar:{carId:null,brand:"",model:"",year:"",licensePlate:"",vin:"",engineCapacity:"",turbo:!1,driveType:"1",petrol:"BENZYNA",insurance:"",insuranceExpiryDate:new Date,carInspectionExpiryDate:new Date}}),d(),p(!1))}),[t]),a.createElement(s.Z,{show:t,onHide:n,backdrop:"static",keyboard:!1,size:"l"},a.createElement(s.Z.Header,{className:"bg-dark-green text-white",closeButton:!0},a.createElement(s.Z.Title,null,"Szybkie dodawanie zawodnika")),a.createElement(s.Z.Body,null,a.createElement("div",{className:"d-flex justify-content-center text-center"},a.createElement("form",{onSubmit:function(e){e.preventDefault(),p(!0),l().post("".concat((0,i.AC)(),"/team/addTeam?eventId=").concat(r),x,{headers:(0,g.Z)()}).then((function(e){d(e.data),p(!1)}))}},a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Imie i nazwisko kierowcy",name:"driver",handleChange:function(e){return j(R(R({},x),{},{driver:e.target.value}))},value:x.driver,big:!0,required:!0,icon:E.KCX})),a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Imie i nazwisko pilota",name:"coDriver",handleChange:function(e){return j(R(R({},x),{},{coDriver:e.target.value}))},value:x.coDriver,big:!0,icon:E.hnx}))),a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Automobilklub kierowcy",name:"club",handleChange:function(e){return j(R(R({},x),{},{club:e.target.value}))},value:x.club,big:!0,icon:E.P88})),a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Automobilklub pilota",name:"coClub",handleChange:function(e){return j(R(R({},x),{},{coClub:e.target.value}))},value:x.coClub,big:!0,icon:E.P88}))),a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Marka samochodu",name:"carBrand",handleChange:function(e){return j(R(R({},x),{},{currentCar:R(R({},x.currentCar),{},{brand:e.target.value})}))},value:x.currentCar.brand,big:!0,required:!0,icon:E.yn$})),a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Model samochodu",name:"carModel",handleChange:function(e){return j(R(R({},x),{},{currentCar:R(R({},x.currentCar),{},{model:e.target.value})}))},value:x.currentCar.model,big:!0,required:!0,icon:E.kQy}))),a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Pojemność silnika [cm3]",name:"engineCapacity",handleChange:function(e){return j(R(R({},x),{},{currentCar:R(R({},x.currentCar),{},{engineCapacity:e.target.value})}))},value:x.currentCar.engineCapacity,big:!0,required:!0,onlyNumber:!0})),a.createElement("div",{className:"col-lg-6"},a.createElement(h.Q,{label:"Rodzaj napędu",options:null==b?void 0:b.driveTypeOption,handleChange:function(e){return j(R(R({},x),{},{currentCar:R(R({},x.currentCar),{},{driveType:e})}))},isValid:!0}))),a.createElement("div",{className:"d-flex justify-content-center"},a.createElement(w.Z,null,a.createElement("span",{className:"py-0 mb-2 mt-1 mx-1 input-group-text"},"Turbo"),a.createElement(w.Z.Check,{inline:!0,label:"TAK",name:"turbo",type:"radio",id:"inline-1",checked:x.currentCar.turbo,onClick:function(){return j(R(R({},x),{},{currentCar:R(R({},x.currentCar),{},{turbo:!0})}))}}),a.createElement(w.Z.Check,{inline:!0,label:"NIE",name:"turbo",type:"radio",id:"inline-2",checked:!x.currentCar.turbo,onClick:function(){return j(R(R({},x),{},{currentCar:R(R({},x.currentCar),{},{turbo:!1})}))}}))),a.createElement("div",{className:"text-center",style:{height:"50px"}},a.createElement("h4",{className:"text-success fw-bold"},u),v&&a.createElement(T.Z,{animation:"border",variant:"secondary",size:"lg"})),a.createElement(o.Z,{className:"m-1",variant:"success",type:"submit",disabled:u},"Dołącz do wydarzenia"),a.createElement(o.Z,{className:"m-1",variant:"secondary",onClick:function(){return n()}},u?"Ok":"Wyjdź")))))},Q=n(1956);function _(e,t,n){fetch(e,{headers:(0,g.Z)()}).then((function(e){return e.blob().then((function(e){var a=document.createElement("a");a.href=URL.createObjectURL(e),a.setAttribute("download",t),a.click(),n&&n()}))}))}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var re=function(e){var t,n,r=e.show,u=e.handleClose,m=e.event,f=(0,c.s0)(),v=ne((0,a.useState)(void 0),2),p=v[0],h=v[1],b=ne((0,a.useState)(),2),w=b[0],N=b[1],k=ne((0,a.useState)(!1),2),x=k[0],j=k[1],z=ne((0,a.useState)(),2),I=z[0],S=z[1],O=ne((0,a.useState)(!1),2),D=O[0],A=O[1],P=ne((0,a.useState)(),2),F=P[0],H=P[1],K=ne((0,a.useState)(),2),M=K[0],B=K[1],L=ne((0,a.useState)(1),2),Y=L[0],W=L[1],R=ne((0,a.useState)(),2),q=R[0],$=R[1],V=ne((0,a.useState)({}),2),X=V[0],te=V[1],ae=null!==sessionStorage.getItem("username");(0,a.useEffect)((function(){r?((0,C.CE)(u),le(),j(!1),S(),A(!1),H(m),(0,i.ON)(m.eventId,(function(e){return te(e)}))):te({})}),[r]);var re=!!m&&(new Date).getTime()>new Date(m.signDeadline).getTime(),le=function(){l().get("".concat((0,i.AC)(),"/team/getTeam"),{headers:(0,g.Z)()}).then((function(e){A(""===e.data),""!==e.data&&h(e.data)}))};return(0,a.useEffect)((function(){void 0!==(null==m?void 0:m.eventId)&&void 0!==(null==p?void 0:p.teamId)&&l().get("".concat((0,i.AC)(),"/event/getEntryFeeFile?eventId=").concat(m.eventId,"&teamId=").concat(p.teamId)).then((function(e){204===e.status?A(!0):S("Mamy już Twoje potwierdzenie")})).catch((function(e){S()}))}),[p]),a.createElement("div",null,a.createElement(s.Z,{style:{zIndex:M||q?1e3:1055},show:r,onHide:u,backdrop:"static",keyboard:!1,size:"xl"},a.createElement(s.Z.Header,{className:"bg-dark-green text-white",closeButton:!0},a.createElement(s.Z.Title,{className:"w-100 row"},a.createElement("div",{className:"col-lg-8"},"Informacje o wydarzeniu"),(null==F?void 0:F.joined)&&a.createElement("div",{className:"col-lg-4"},a.createElement(y.G,{className:"text-success fa-lg",icon:E.Tab}),"Jesteś zapisany"))),a.createElement(U.Z,{activeKey:Y,onSelect:function(e){return W(e)},className:"m-0 fw-bold text-dark"},a.createElement(G.Z,{eventKey:1,title:"Informacje"},a.createElement("div",{className:"row text-center px-2"},a.createElement("div",{className:"col-lg-7 px-0"},a.createElement("h3",null,(null==m?void 0:m.name)||""),a.createElement("h6",null,"Data wydarzenia:  "),a.createElement("h6",{className:"fw-bold"},Z()(null==m?void 0:m.date).format(" dddd, DD MMM YYYY, HH:mm")),a.createElement("p",{className:"fw-bold fst-italic m-2"},"Koniec zapisów:  ".concat(Z()(null==m?void 0:m.signDeadline).format("dddd, DD MMM YYYY, HH:mm"))),a.createElement("h6",{style:{whiteSpace:"pre-line"},className:"ps-2 py-2"},(null==m?void 0:m.headDescription)||"")),a.createElement("div",{className:"col-lg-5 py-1  align-items-center d-flex"},null!=X&&X.file?a.createElement("img",{id:"eventImage"+(null==m?void 0:m.eventId),style:{maxHeight:"450px"},className:"pt-2 img-fluid rounded float-left",src:"data:image/jpg;base64,"+X.file,alt:"Logo"}):void 0!==(null==m?void 0:m.logoPath)&&null!==(null==m?void 0:m.logoPath)&&a.createElement("div",{className:""},a.createElement("img",{style:{maxHeight:"450px",position:"relative",top:"30%"},className:"img-fluid rounded float-left",src:m.logoPath,alt:"Logo"}))),a.createElement("div",{className:"col-lg-12 py-2"},a.createElement("p",{style:{whiteSpace:"pre-line"},className:"font14 m-1 py-2"},(null==m?void 0:m.description)||""),a.createElement("p",{style:{whiteSpace:"pre-line"},className:"font12 m-1"},(null==m?void 0:m.footerDescription)||""))),a.createElement(d.Z,{className:"text-center"},a.createElement(d.Z.Header,{className:"bg-dark-green text-white"},"Do pobrania:"),a.createElement(d.Z.Body,null,a.createElement("div",{className:"row "},a.createElement("div",{className:"col-lg-12 px-0"},null==m||null===(t=m.eventPaths)||void 0===t?void 0:t.map((function(e,t){return a.createElement("h6",{key:t,className:"my-1"},a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.path.startsWith("http")?e.path:"http://"+e.path},e.description))})),null==m||null===(n=m.eventFiles)||void 0===n?void 0:n.map((function(e,t){return a.createElement("h6",{key:t,className:"my-1"},a.createElement("a",{href:"www",onClick:function(t){return function(e,t){e.preventDefault(),_("".concat((0,i.AC)(),"/event/getEventFile?id=").concat(t.id),t.fileName)}(t,e)}},e.description))}))))))),ae?a.createElement(G.Z,{eventKey:2,title:"Wpisowe"},a.createElement("div",{className:"row mx-2 justify-content-center"},a.createElement("div",{className:"col-lg-6 pb-3 px-1"},a.createElement("h5",{className:"text-center py-4"},"Tutaj możesz dodać plik z potwierdzeniem wpisowego, przyspieszy to proces odbioru administracyjnego"),a.createElement(d.Z,{className:"text-center "},a.createElement(d.Z.Header,{className:"bg-dark-green text-white"},"Wpisowe"),a.createElement(d.Z.Body,null,D?a.createElement("p",null,"Zapisz się a następnie będziesz miał możliwość przesłania pliku"):a.createElement("p",null,"Dodaj plik z potwierdzeniem opłacenia wpisowego"),a.createElement("input",{disabled:D,type:"file",name:"file",accept:"application/pdf,application/vnd.ms-excel",onChange:function(e){return N(e.target.files[0])}}),I&&a.createElement("p",{className:"fw-bold m-2"},I),a.createElement("div",null,x?a.createElement(T.Z,{animation:"border",variant:"secondary"}):a.createElement(o.Z,{className:"mt-2 mb-0",variant:"secondary",onClick:function(){return function(e,t){if(w.size>2097152)S("Plik jest zbyt duży (maksymalnie 2mb)");else{j(!0);var n=new FormData;n.append("file",w),l().post("".concat((0,i.AC)(),"/event/addEntryFeeFile?eventId=").concat(e,"&teamId=").concat(t),n,{headers:(0,g.Z)()}).then((function(e){j(!1),e.data?S("Plik został dodany"):S("Plik NIE został dodany - błąd")}))}}(m.eventId,p.teamId)},disabled:void 0===w},"Wyślij plik"))))))):a.createElement(a.Fragment,null)),a.createElement(s.Z.Footer,null,a.createElement("div",{className:"row justify-content-center"},a.createElement("div",{className:"col-xl-12 d-flex"},a.createElement("div",{className:""},a.createElement(o.Z,{className:"m-1",variant:"success",form:"teamForm",onClick:function(){ae?$(!0):f("login?".concat(m.eventId))},disabled:re&&D},D?"Zapisz się":"Edytuj dane")),a.createElement("div",{className:""},a.createElement(o.Z,{className:"m-1",variant:"secondary",onClick:u},"Zamknij okno"),(null==F?void 0:F.joined)&&a.createElement(o.Z,{className:"mx-3",variant:"danger",onClick:function(){(0,i.yd)(m.eventId,null==p?void 0:p.teamId,(function(){H(ee(ee({},F),{},{joined:!1})),A(!0)}))},disabled:re},"Wypisz się")))))),a.createElement(J,{show:M,handleClose:function(){return B()},eventId:null==m?void 0:m.eventId}),a.createElement(Q.o,{show:q,handleClose:function(){return $()},handleOk:function(){return u()},myEvent:m}))},le=n(6459);function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var de=function(e){var t,n,r,c,u,d,f=e.show,v=e.myTeam,p=(e.eventId,e.onSave),y=e.okBtnLabel,g=e.handleClose,b=e.title,N=se((0,a.useState)(!1),2),k=N[0],x=N[1],j=se((0,a.useState)(),2),z=j[0],I=j[1],S=se((0,a.useState)(v),2),O=S[0],Z=S[1];return(0,a.useEffect)((function(){f&&((0,C.CE)(g),l().get("".concat((0,i.AC)(),"/team/getTeamOptionList")).then((function(e){I(e.data)})),x(!1))}),[f]),a.createElement(s.Z,{show:f,onHide:g,backdrop:"static",keyboard:!1,size:"l"},a.createElement(s.Z.Header,{closeButton:!0,className:"bg-dark-green text-white"},a.createElement(s.Z.Title,{className:"text-white"},b)),a.createElement(s.Z.Body,null,a.createElement("div",{className:"d-flex justify-content-center text-center"},a.createElement("form",{onSubmit:function(e){x(!0),e.preventDefault(),p(O)}},a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Imie i nazwisko kierowcy",name:"driver",handleChange:function(e){return Z(ie(ie({},O),{},{driver:e.target.value}))},value:O.driver,big:!0,required:!0,icon:E.KCX})),a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Imie i nazwisko pilota",name:"coDriver",handleChange:function(e){return Z(ie(ie({},O),{},{coDriver:e.target.value}))},value:O.coDriver,big:!0,icon:E.hnx}))),a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Automobilklub kierowcy",name:"club",handleChange:function(e){return Z(ie(ie({},O),{},{club:e.target.value}))},value:O.club,big:!0,icon:E.P88})),a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Automobilklub pilota",name:"coClub",handleChange:function(e){return Z(ie(ie({},O),{},{coClub:e.target.value}))},value:O.coClub,big:!0,icon:E.P88}))),a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-12"},a.createElement(m.K,{label:"Nazwa Teamu",name:"teamName",handleChange:function(e){return Z(ie(ie({},O),{},{teamName:e.target.value}))},value:O.teamName,big:!0,icon:E.r$M}))),a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Marka samochodu",name:"carBrand",handleChange:function(e){return Z(ie(ie({},O),{},{currentCar:ie(ie({},O.currentCar),{},{brand:e.target.value})}))},value:null===(t=O.currentCar)||void 0===t?void 0:t.brand,big:!0,required:!0,icon:E.yn$})),a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Model samochodu",name:"carModel",handleChange:function(e){return Z(ie(ie({},O),{},{currentCar:ie(ie({},O.currentCar),{},{model:e.target.value})}))},value:null===(n=O.currentCar)||void 0===n?void 0:n.model,big:!0,required:!0,icon:E.kQy}))),a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-6"},a.createElement(m.K,{label:"Pojemność silnika [cm3]",name:"engineCapacity",handleChange:function(e){return Z(ie(ie({},O),{},{currentCar:ie(ie({},O.currentCar),{},{engineCapacity:e.target.value})}))},value:null===(r=O.currentCar)||void 0===r?void 0:r.engineCapacity,big:!0,required:!0,onlyNumber:!0})),a.createElement("div",{className:"col-lg-6"},a.createElement(h.Q,{label:"Rodzaj napędu",options:null==z?void 0:z.driveTypeOption,handleChange:function(e){return Z(ie(ie({},O),{},{currentCar:ie(ie({},O.currentCar),{},{driveType:e})}))},value:null===(c=O.currentCar)||void 0===c?void 0:c.driveType,isValid:!0}))),a.createElement("div",{className:"d-flex justify-content-center"},a.createElement(w.Z,null,a.createElement("span",{className:"py-0 mb-2 mt-1 mx-1 input-group-text"},"Turbo"),a.createElement(w.Z.Check,{inline:!0,label:"TAK",name:"turbo",type:"radio",id:"inline-1",checked:null===(u=O.currentCar)||void 0===u?void 0:u.turbo,onClick:function(){return Z(ie(ie({},O),{},{currentCar:ie(ie({},O.currentCar),{},{turbo:!0})}))}}),a.createElement(w.Z.Check,{inline:!0,label:"NIE",name:"turbo",type:"radio",id:"inline-2",checked:!(null!==(d=O.currentCar)&&void 0!==d&&d.turbo),onClick:function(){return Z(ie(ie({},O),{},{currentCar:ie(ie({},O.currentCar),{},{turbo:!1})}))}}))),a.createElement("div",{className:"text-center",style:{height:"50px"}},k&&a.createElement(T.Z,{animation:"border",variant:"secondary",size:"lg"})),a.createElement(o.Z,{className:"m-1",variant:"success",type:"submit"},y),a.createElement(o.Z,{className:"m-1",variant:"secondary",onClick:function(){return g()}},"Anuluj")))))},me=n(2763);function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ve(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var pe=function(e){var t=e.show,n=e.handleClose,r=e.eventId,c=fe((0,a.useState)(!1),2),u=c[0],p=c[1],y=fe((0,a.useState)(),2),E=y[0],w=y[1],N=fe((0,a.useState)(),2),k=N[0],x=N[1],j=fe((0,a.useState)(1),2),z=j[0],I=j[1],S=fe((0,a.useState)([]),2),O=S[0],D=S[1],A=fe((0,a.useState)(),2),P=A[0],F=A[1],T=fe((0,a.useState)(),2),H=T[0],K=T[1];return(0,a.useEffect)((function(){t&&((0,C.CE)(n),p(!1),I(1),l().get("".concat((0,i.AC)(),"/event/getPsOptions?eventId=").concat(r),{headers:(0,g.Z)()}).then((function(e){var t;D(e.data),x(null===(t=e.data[0])||void 0===t?void 0:t.value)})))}),[t]),a.createElement(a.Fragment,null,a.createElement(s.Z,{style:{zIndex:E?1e3:1055},show:t,onHide:n,backdrop:"static",keyboard:!1},a.createElement(s.Z.Header,{closeButton:!0,className:"bg-dark-green text-white"},a.createElement(s.Z.Title,{className:"text-white"},"Lista startowa")),a.createElement(s.Z.Body,null,a.createElement("div",{className:"row text-center"},a.createElement("div",{className:"col-lg-12 pb-3"},a.createElement(d.Z,{className:""},a.createElement(d.Z.Body,null,a.createElement("p",{style:{whiteSpace:"break-spaces"}},"Na liście startowej znajdą się wszyscy zawodnicy którzy NIE otrzymali negatywnego BK i/lub OA oraz \nNIE dostali kary wykluczającej z zawodów (dyskwalifikacja lub wycofanie)\n                    \nNegatywny BK i/lub OA możesz dodać w panelu danych zawodnika.\n                    \nPlik z listą startową zostanie dodany w komunikatach wydarzenia.\n                    "),a.createElement(h.Q,{label:"Odcinek na który dodawana jest lista startowa",options:O,value:k,handleChange:function(e){return x(e)},isValid:!0}),a.createElement(m.K,{label:"Pełna nazwa PKC",value:H,handleChange:function(e){return K(e.target.value)},big:!0}),a.createElement(f.jI,{label:"Czas startu na PKC",onChange:function(e){return F(e)},calendarContainer:function(e){var t=e.className,n=e.children;return a.createElement(a.Fragment,null,a.createElement(v.CalendarContainer,{className:t},a.createElement("div",{style:{display:"flex"}},n)))},selected:P}),a.createElement(m.K,{label:"Co ile minut start zawodnika",value:z,handleChange:function(e){return I(e.target.value)},onlyNumber:!0,type:"number",big:!0}))))),a.createElement("div",{className:"text-center"},a.createElement(me.O,{variant:"success",isLoading:u,onClick:function(){p(!0),(0,i.oB)(r,k,H,Z()(P).format("YYYY-MM-DDTHH:mm:ss.SSS[Z]"),z,(function(e){p(!1),w(e)}))},disabled:!(k&&z&&P&&H),msg:"Dodaj listę startową",loadingMsg:"Dodawanie listy startowej"}),a.createElement(o.Z,{className:"m-1",variant:"secondary",onClick:function(){return n()}},"Wróć")))),a.createElement(b.e,{show:void 0!==E,title:"",text:E?"Lista startowa została dodana do komunikatów wydarzenia":"Akcja nieudana",handleAccept:function(){return w()}}))};function ye(){return ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ye.apply(this,arguments)}function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?we(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Ce=function(e){var t=e.show,n=e.handleClose,r=e.eventId,c=e.eventName,u=(e.started,be((0,a.useState)([]),2)),m=u[0],f=u[1],v=be((0,a.useState)([]),2),p=v[0],w=v[1],N=be((0,a.useState)(!1),2),k=N[0],x=N[1],j=be((0,a.useState)(!0),2),z=j[0],I=j[1],S=be((0,a.useState)(!1),2),O=S[0],Z=S[1],D=be((0,a.useState)(!1),2),A=D[0],P=D[1],F=be((0,a.useState)({driver:null,teamId:null}),2),H=F[0],K=F[1],B=be((0,a.useState)({driver:null,teamId:null}),2),L=B[0],Y=B[1],U=be((0,a.useState)(),2),G=U[0],W=U[1],R=be((0,a.useState)([]),2),q=R[0],$=R[1],V=be((0,a.useState)(),2),X=V[0],ee=V[1],te=be((0,a.useState)(),2),ne=te[0],ae=te[1],re=be((0,a.useState)(),2),ce=re[0],ie=re[1],oe=be((0,a.useState)(!1),2),se=oe[0],ue=oe[1],fe=be((0,a.useState)(!1),2),ve=fe[0],Ee=fe[1],ge=be((0,a.useState)(!1),2),we=ge[0],Ce=ge[1],Ne=be((0,a.useState)(!1),2),ke=Ne[0],xe=Ne[1],je=be((0,a.useState)([]),2),ze=je[0],Ie=je[1],Se=be((0,a.useState)("0"),2),Oe=Se[0],Ze=Se[1];(0,a.useEffect)((function(){t&&((0,C.CE)(n),He(),I(!0),f([]),w([]),Te(),(0,i.sH)(r,(function(e){var t=[{label:"WSZYSTKIE KLASY",value:"0",defValue:!0}];e.classesOptions.filter((function(e){return"GENERALNA"!==e.label&&"GENERALNA+GOŚĆ"!==e.label})).forEach((function(e){return t.push(e)})),Ie(t||[])}))),Fe()}),[t]),(0,a.useEffect)((function(){w("0"!==Oe?m.filter((function(e){var t;return e.carClass.name===Oe||(null===(t=e.car)||void 0===t?void 0:t.driveTypeEnum)===Oe})):m)}),[m,Oe]);var De=function(){K({driver:null,teamId:null})},Ae=function(){Y({driver:null,teamId:null})},Pe=function(e){return{teamId:e.teamId,driver:e.driver+" / "+e.coDriver}},Fe=function(){void 0!==r&&l().get("".concat((0,i.AC)(),"/event/getBasicTeams?eventId=").concat(r)).then((function(e){var t=e.data.sort((function(e,t){return e.order-t.order}));f(t),w(t),I(!1)}))},Te=function(){l().get("".concat((0,i.AC)(),"/event/getEvent?eventId=").concat(r)).then((function(e){$(e.data.eventClasses.map((function(e){return he(he({},e),{},{value:e.carClassId,label:e.carClass.name})})))}))},He=function(){l().get("".concat((0,i.AC)(),"/event/checkReferee?eventId=").concat(r),{headers:(0,g.Z)()}).then((function(e){Z(e.data)}))},Ke=function(e,t){var n=m.findIndex((function(t){return t.id===e}));m[n].carClassId!==t&&(m[n].carClassId=t,f(m))},Me=function(e,t){var n=m.filter((function(t){return t.id!==e.id}));e.number=t,e.forcedNumber=""!==t,n.push(e),n.sort((function(e,t){return e.order-t.order})),f(Be(n))},Be=function(e){var t=[],n=m.filter((function(e){return e.forcedNumber})).map((function(e){return e.number})),a=1;for(var r in e){var l=e[r];if(l.forcedNumber)t.push(l);else{if(l.forcedNumber||n.includes(a)){for(;n.includes(a);)a++;l.number=a++}else l.number=a++;t.push(l)}}return t};return a.createElement(a.Fragment,null,a.createElement(s.Z,{style:{zIndex:X||ne||ce||ke?1e3:1055},show:t,onHide:n,backdrop:"static",keyboard:!1,size:"xl"},a.createElement(s.Z.Header,{className:"bg-dark-green text-white",closeButton:!0},a.createElement(s.Z.Title,null,"Lista zapisanych")),a.createElement(s.Z.Body,{className:"pb-0"},z&&a.createElement("div",{className:"text-center"},a.createElement(T.Z,{animation:"border",variant:"secondary",size:"lg"})),!z&&0===m.length&&a.createElement("h1",{className:"text-center"},"Brak zgłoszeń"),!z&&(null==m?void 0:m.length)>0&&a.createElement(a.Fragment,null,a.createElement("div",{className:"row pt-0 mx-0 card-body"},a.createElement("div",{className:"col-xl-4 px-0 pe-1"}),a.createElement("div",{className:"col-xl-4 px-0 pe-1"},a.createElement(h.Q,{label:"Filtruj klasami",options:ze,handleChange:function(e){return Ze(e)},isValid:!0}))),a.createElement("table",{style:{minWidth:"600px"}},a.createElement("th",{className:""},a.createElement("td",{style:{width:"70px"}},"Edycja"),a.createElement("td",{style:{width:"60px"}},"Nr"),a.createElement("td",{style:{width:"400px"}},"Kierowca"),a.createElement("td",{style:{width:"250px"}},"Samochód"),a.createElement("td",{style:{width:"100px"}},"Klasa"),a.createElement("td",{style:{width:"100px"}},"Zapłacone"),a.createElement("td",{style:{width:"110px"}},"Potwierdź wpisowe"),a.createElement("td",{style:{width:"100px"}},"Plik"),a.createElement("td",{style:{width:"50px"}},"OA/BK"),a.createElement("td",{style:{width:"10px"}}),a.createElement("td",{style:{width:"80px",textAlign:"right"}},"Usuń załogę"))),a.createElement("div",{style:{overflowX:"scroll"}},a.createElement(le.Z5,{onDragStart:function(){return P(!0)},onDragEnd:function(e){if(e.destination){var t=Array.from(m),n=be(t.splice(e.source.index,1),1)[0];t.splice(e.destination.index,0,n);var a=1;t.map((function(e){return e.order=a++}));var r=Be(t);f(r),w(r),P(!1)}}},a.createElement(le.bK,{droppableId:"selectedCases"},(function(e){return a.createElement("ol",ye({className:"selectedCases fw-bold",style:{minWidth:"600px"}},e.droppableProps,{ref:e.innerRef}),null==p?void 0:p.map((function(e,t){return a.createElement(le._l,{key:e.order,draggableId:e.order.toString(),index:t,isDragDisabled:"0"!==Oe},(function(t){var n,l,c,o;return a.createElement("li",ye({ref:t.innerRef},t.draggableProps,t.dragHandleProps),a.createElement(d.Z,{className:"my-1"},a.createElement(d.Z.Body,{className:"p-0"},a.createElement("table",{className:"m-0"},a.createElement("tr",{className:"d-table-row fw-normal align-middle"},a.createElement("td",{className:e.teamChecked&&e.entryFeePaid&&e.bkPositive?"bg-success":"",style:{width:"20px"}},a.createElement(y.G,{icon:E.yXf,onClick:function(){return ee({teamId:e.teamId,driver:e.driver,coDriver:e.coDriver,club:e.club,coClub:e.coClub,teamName:e.teamName,currentCar:e.car})},title:"Edytuj dane",cursor:"pointer"})),a.createElement("td",{style:{width:"55px"}},a.createElement("input",{style:{width:"90%",backgroundColor:"#ffad4f",fontWeight:e.forcedNumber?"700":"100",borderRadius:"20px",textAlign:"center"},type:"number",value:e.number,onChange:function(t){return function(e,t){Me(t,""!==e?Number(e):" ")}(t.target.value,e)},onBlur:function(t){return function(e,t){var n=Number(e);m.find((function(e){return e.id!==t.id&&e.forcedNumber&&e.number===n}))&&Me(t,"")}(t.target.value,e)}})),a.createElement("td",{style:{width:"250px"}},a.createElement(M.Ur,{team:{driver:e.driver,coDriver:e.coDriver,club:e.club,coClub:e.coClub,teamName:e.teamName}})),a.createElement("td",{style:{width:"250px"}},a.createElement(M.He,{line1:((null===(n=e.car)||void 0===n?void 0:n.brand)||"")+" "+((null===(l=e.car)||void 0===l?void 0:l.model)||""),driveType:null===(c=e.car)||void 0===c?void 0:c.driveTypeEnum,line2:(null===(o=e.car)||void 0===o?void 0:o.engineCapacity)+" cm3"})),a.createElement("td",{style:{width:"130px",display:"flex"}},!A&&a.createElement(h.Q,{className:"m-0 p-0",options:q,handleChange:function(t){Ke(e.id,t)},isValid:!0,value:e.carClassId}),A&&a.createElement(h.Q,{className:"m-0 p-0",options:q,handleChange:function(t){Ke(e.id,t)},isValid:!0,skipDefault:!0})),a.createElement("td",{style:{width:"90px"}},e.entryFeePaid?a.createElement(y.G,{className:"text-success",icon:E.egO}):a.createElement(y.G,{className:"text-danger",icon:E.WV2})),a.createElement("td",{style:{width:"90px"}},a.createElement(y.G,{icon:E.owJ,onClick:function(){return Y(Pe(e))},title:"Potwierdź wpisowe",cursor:"pointer"})),a.createElement("td",{style:{width:"90px"}},e.entryFeeFileExist?a.createElement(y.G,{icon:E.q7m,onClick:function(){return t=e.teamId,n=e.driver,void _("".concat((0,i.AC)(),"/event/getEntryFeeFile?eventId=").concat(r,"&teamId=").concat(t),"potwierdzenie_wplaty_"+n+".pdf");var t,n},title:"Pobierz plik",cursor:"pointer"}):a.createElement(a.Fragment,null)),a.createElement("td",{style:{width:"30px"}},e.teamChecked?a.createElement(y.G,{className:"text-success",icon:E.Yjj,onClick:function(){return ae(e.teamId)},title:"Podgląd danych",cursor:"pointer"}):a.createElement(y.G,{icon:E.Yjj,onClick:function(){return ae(e.teamId)},title:"Podgląd danych",cursor:"pointer"})),a.createElement("td",{style:{width:"30px"}},a.createElement(M.Jk,{oa:e.teamChecked,bk:e.bkPositive})),a.createElement("td",{style:{width:"60px",color:"red",textAlign:"right",paddingRight:"5px"}},a.createElement(y.G,{icon:E.nYk,onClick:function(){return K(Pe(e))},title:"Usuń załoge",cursor:"pointer"})))))))}))})),e.placeholder)}))))),null!==H.teamId&&a.createElement(b.m,{show:!0,title:"Usuwanie załogi",text:"Czy napewno chcesz usunąć załoge: ".concat(H.driver),handleAccept:function(){(0,i.yd)(r,H.teamId,(function(){return Fe()})),De()},handleClose:function(){De()}}),null!==L.teamId&&a.createElement(b.m,{show:!0,title:"Potwierdzanie wpisowego",text:"Czy napewno chcesz potwierdzić wpłatę wpisowego przez załoge: ".concat(L.driver),handleAccept:function(){(0,i.a$)(r,L.teamId,(function(){return Fe()})),Ae()},handleClose:function(){Ae()}}),k&&a.createElement(b.m,{show:!0,title:"Zamykanie listy / Rozpoczynanie wydarzenia",text:"Czy napewno chcesz zamknąć listę i rozpocząć wydarzenie? Operacja nieodwracalna",handleAccept:function(){l().post("".concat((0,i.AC)(),"/event/startEvent?eventId=").concat(r),{headers:(0,g.Z)()}).then((function(){})),x(!1)},handleClose:function(){return x(!1)}}),X&&a.createElement(de,{show:!0,myTeam:X,eventId:r,onSave:function(e){return function(e){I(!0),(0,i.Nx)(r,e,(function(){Fe(),ee()}))}(e)},okBtnLabel:"Zapisz zmiany",handleClose:function(){return ee()},title:"Edycja danych załogi"}),se&&a.createElement(b.m,{show:!0,title:"Sortowanie",text:"Czy chcesz posortować zawodników? Pamiętaj, że zresetuje to numery które nie zostały wpisane ręcznie (nie-pogrubione). Jeśli chcesz nadać komuś numer na stałe edytuj wartość na liście.",handleAccept:function(){P(!0),l().post("".concat((0,i.AC)(),"/event/sortByClass"),m,{headers:(0,g.Z)()}).then((function(e){f(e.data),P(!1)})),ue(!1)},handleClose:function(){return ue(!1)}}),ne&&a.createElement(Q.o,{show:!0,handleClose:function(){Fe(),ae()},myEvent:{eventId:r,started:!1,teamId:ne},mode:"preview"}),a.createElement(J,{show:ce,handleClose:function(){Fe(),ie()},eventId:r}),a.createElement("div",{className:"text-center"},a.createElement("div",{className:"col-xl-12"},a.createElement("p",{className:"font12 m-0 p-0"},"Sortowanie można wykonać również ręcznie przesuwając zawodnika za pomocą myszy (tylko jeśli filtr klasy ustawiony jest na Wszystkie klasy) - po zakończeniu ZAPISZ"),a.createElement("p",{className:"font12 m-0 p-0"},"Zmiana kolejności zmienia numery startowe! Jeśli chcesz nadać numer startowy zawodnikowi wpisz go ręcznie"),a.createElement(o.Z,{className:"m-1",variant:"info",onClick:function(){return ue(!0)},disabled:"0"!==Oe},"Sortuj wstępnie wg. klas")),a.createElement("div",{className:"col-xl-12"},a.createElement(me.O,{variant:"primary",isLoading:ve,onClick:function(){return Ee(!0),void _("".concat((0,i.AC)(),"/file/getEventTeamsData?eventId=").concat(r),"dokumenty_oa_"+c+".pdf",(function(){return Ee(!1)}))},msg:"Pobierz dokumenty OA",loadingMsg:"Pobieranie dokumentów OA"}),a.createElement(me.O,{variant:"primary",isLoading:we,onClick:function(){return Ce(!0),void _("".concat((0,i.AC)(),"/file/getBkFiles?eventId=").concat(r),"dokumenty_bk_"+c+".pdf",(function(){return Ce(!1)}))},msg:"Pobierz dokumenty BK",loadingMsg:"Pobieranie dokumentów BK"})),a.createElement("div",{className:"col-xl-12"},a.createElement(me.O,{variant:"warning",onClick:function(){return xe(!0)},msg:"Zatwierdź listę startową"})),a.createElement("p",null,G))),a.createElement(s.Z.Footer,{className:"justify-content-center py-0"},a.createElement("div",{className:"d-flex"},O&&a.createElement(o.Z,{className:"m-2",variant:"success",onClick:function(){return ie(!0)}},"Dodaj zawodnika"),a.createElement(o.Z,{className:"m-2",variant:"success",onClick:function(){l().post("".concat((0,i.AC)(),"/event/saveNumbersAndClasses?eventId=").concat(r),m,{headers:(0,g.Z)()}).then((function(e){e.data?W("Kolejność i klasy zostały zapisane"):W("Coś poszło nie tak"),setTimeout((function(){return W()}),5e3)}))}},"Zapisz klasy i kolejność załóg"),a.createElement(o.Z,{className:"m-2",variant:"secondary",onClick:n},"Wyjdź")))),a.createElement(pe,{show:ke,eventId:r,handleClose:function(){return xe(!1)}}))};function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ze(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Ie=function(e){var t=e.show,n=e.handleClose,r=e.eventId,c=je((0,a.useState)(!1),2),u=c[0],d=c[1],p=je((0,a.useState)(""),2),y=p[0],h=p[1],b=je((0,a.useState)({}),2),w=b[0],N=b[1],k=je((0,a.useState)(),2),x=k[0],j=k[1];(0,a.useEffect)((function(){t&&((0,C.CE)(n),h(""),d(!1),j(),N({eventId:r,date:new Date,name:"",description:"",file:null}))}),[t]);var z=function(e){N(ke(ke({},w),{},xe({},e.target.name,e.target.value)))};return a.createElement(s.Z,{show:t,onHide:n,backdrop:"static",keyboard:!1,size:"lg"},a.createElement(s.Z.Header,{className:"bg-dark-green text-white",closeButton:!0},a.createElement(s.Z.Title,null,"Dodawanie komunikatu")),a.createElement(s.Z.Body,null,a.createElement("div",{className:"d-flex justify-content-center text-center"},a.createElement("form",{onSubmit:function(e){d(!0),e.preventDefault(),l().post("".concat((0,i.AC)(),"/statement/addStatement"),w,{headers:(0,g.Z)()}).then((function(e){var t;x?(t=e.data,l().post("".concat((0,i.AC)(),"/statement/addFileToStatement?statementId=").concat(t),x,{headers:(0,g.Z)()}).then((function(e){h(e.data),d(!1)}))):(h("Dodano komunikat"),d(!1))}))}},a.createElement("div",{className:"row d-flex"},a.createElement(f.z4,{label:"Data komunikatu",onChange:function(e){return N(ke(ke({},w),{},{date:e}))},selected:w.date,calendarContainer:function(e){var t=e.className,n=e.children;return a.createElement(a.Fragment,null,a.createElement(v.CalendarContainer,{className:t},a.createElement("div",{style:{display:"flex"}},n)))},minDate:null,maxDate:null}),a.createElement(m.K,{label:"Nazwa komunikatu",name:"name",handleChange:z,value:w.name,big:!0,required:!0,icon:E.FL8})),a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-12"},a.createElement(m.K,{label:"Treść komunikatu",inputPlaceholder:"Dodaj treść komunikatu tekstowego lub załącz plik który będzie udostępniony do pobrania",name:"description",handleChange:z,value:w.description,big:!0,icon:E.kQy,multiline:5}))),a.createElement("div",{className:"row d-flex"},a.createElement("div",{className:"col-lg-12"},a.createElement("span",{className:"font14 input-group-text py-0 ",id:""},"Dodaj plik"),a.createElement("div",{class:"input-group mb-0"},a.createElement("input",{type:"file",name:"file",onChange:function(e){return function(e){var t=e.target.files[0],n=new FormData;n.append("file",t),N(ke(ke({},w),{},{fileName:t.name})),j(n)}(e)}})))),a.createElement("div",{className:"text-center",style:{height:"50px"}},a.createElement("h4",{className:"fw-bold"},y),u&&a.createElement(T.Z,{animation:"border",variant:"secondary",size:"lg"})),a.createElement(o.Z,{className:"m-1",variant:"success",type:"submit"},"Dodaj"),a.createElement(o.Z,{className:"m-1",variant:"secondary",onClick:function(){return n()}},"Wyjdź")))))};function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Ze=function(e){var t=e.show,n=e.handleClose,r=e.event,c=Se((0,a.useState)(),2),u=c[0],d=c[1],m=Se((0,a.useState)(),2),f=m[0],v=m[1],p=Se((0,a.useState)(),2),h=p[0],w=p[1],N=Se((0,a.useState)(!0),2),k=N[0],x=N[1],j=Se((0,a.useState)([]),2),z=j[0],I=j[1],S=Se((0,a.useState)(!1),2),O=S[0],D=S[1],A=Se((0,a.useState)(["file","delete"]),2),P=A[0],F=A[1];(0,a.useEffect)((function(){t&&((0,C.CE)(n),void 0!==(null==r?void 0:r.eventId)&&(0,i.Ot)(null==r?void 0:r.eventId,D),K())}),[t]),(0,a.useEffect)((function(){O&&F(["file"])}),[O]);var K=function(){x(t),(0,i.wO)(null==r?void 0:r.eventId,(function(e){I(e),x(!1)}))},M=(0,a.useMemo)((function(){return[{width:"7%",id:"index",Header:"L.p",accessor:function(e){return e.number},disableFilters:!0,Cell:function(e){return a.createElement("div",{className:"ps-2"}," ",e.row.index+1)}},{width:"25%",id:"date",Header:"Data dodania",accessor:function(e){return e.date},disableFilters:!0,Cell:function(e){return a.createElement("div",{className:"ps-2"},Z()(e.value).format("DD-MM-YYYY, HH:mm"))}},{width:"40%",id:"name",Header:"Nazwa",accessor:function(e){return e.name},disableFilters:!0},{width:"7%",id:"file",Header:"Plik",accessor:function(e){return e.file},disableFilters:!0},{width:"8%",id:"download",Header:"Plik",accessor:function(e){return e.fileName},disableFilters:!0,Cell:function(e){return e.value&&e.row.original.fileExist?a.createElement(y.G,{icon:E.q7m,title:"Pobierz",cursor:"pointer",onClick:function(){return t=e.row.original.statementId,e.value,void window.open("".concat((0,i.AC)(),"/statement/downloadFile?statementId=").concat(t),"_blank");var t}}):a.createElement(a.Fragment,null)}},{width:"9%",id:"view",Header:"Opis",accessor:function(e){return e.description},disableFilters:!0,Cell:function(e){return e.value?a.createElement(y.G,{icon:E.wn1,title:"Podgląd",cursor:"pointer",onClick:function(){return v(e.row.original)}}):a.createElement(a.Fragment,null)}},{width:"10%",id:"delete",Header:"Usuń",accessor:function(e){return e.description},disableFilters:!0,Cell:function(e){return a.createElement(y.G,{icon:E.nYk,title:"Usuń komunikat",cursor:"pointer",className:"text-danger",onClick:function(){return w(e.row.original)}})}}]}),[P]);return a.createElement(a.Fragment,null,a.createElement(s.Z,{show:t,style:{zIndex:u||f||h?1e3:1055},onHide:n,backdrop:"static",keyboard:!1,size:"xl"},a.createElement(s.Z.Header,{closeButton:!0,className:"bg-dark-green text-white"},a.createElement(s.Z.Title,{className:"text-white"},"Komunikaty")),a.createElement(s.Z.Body,null,a.createElement("h5",{className:"text-center"}," ",r.name)," ",k?a.createElement("div",{className:"text-center"},a.createElement(T.Z,{animation:"border",variant:"secondary",size:"lg"})):0===z.length?a.createElement("h4",{className:"text-center pt-3"},"Organizator nie dodał komunikatów"):a.createElement(H.Z,{columns:M,data:z,hiddenColumns:P,isLoading:k,isHeader:!0,manualPagination:!0})),a.createElement(s.Z.Footer,{className:"justify-content-center"},a.createElement("div",{className:"d-flex"},O&&a.createElement(o.Z,{className:"m-1",variant:"success",onClick:function(){return d(!0)}},"Dodaj komunikat"),a.createElement(o.Z,{className:"m-1",variant:"secondary",onClick:n},"Wyjdź")))),a.createElement(Ie,{show:u,handleClose:function(){d(),K()},eventId:null==r?void 0:r.eventId}),f&&a.createElement(b.e,{show:!0,title:"Komunikat "+f.name,text:"Dodano: "+Z()(f.date).format("dddd, DD MMM YYYY, HH:mm")+"\n\n"+f.description,handleAccept:function(){return v()}}),h&&a.createElement(b.m,{show:!0,title:"Usuwanie komunikatu",text:"Czy chcesz usunąć komunikat ".concat(h.name," ?"),handleAccept:function(){var e;e=h.statementId,l().delete("".concat((0,i.AC)(),"/statement/deleteStatement?statementId=").concat(e),{headers:(0,g.Z)()}).then((function(e){return K()})),w()},handleClose:function(){return w()}}))};function De(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,r,l=[],c=!0,i=!1;try{for(n=n.call(e);!(c=(a=n.next()).done)&&(l.push(a.value),!t||l.length!==t);c=!0);}catch(e){i=!0,r=e}finally{try{c||null==n.return||n.return()}finally{if(i)throw r}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ae(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Pe=function(e){var t=De((0,a.useState)([]),2),n=t[0],r=t[1],s=De((0,a.useState)(),2),u=s[0],m=s[1],f=De((0,a.useState)(),2),v=f[0],p=f[1],y=De((0,a.useState)(),2),E=y[0],h=y[1],b=De((0,a.useState)(!1),2),w=b[0],C=b[1],N=De((0,a.useState)(!1),2),k=N[0],x=N[1],j=De((0,a.useState)(),2),z=j[0],I=j[1],O=De((0,a.useState)(!1),2),Z=O[0],D=O[1],A=(0,P.kY)(),H=A.data,K=void 0===H?[]:H,M=A.isFetching,B=(0,P.Wp)(),L=B.data,U=void 0===L?[]:L,G=B.isFetching,W=B.refetch,R=(0,c.TH)().search,q=(0,c.s0)();return(0,a.useEffect)((function(){if(!G&&0!==U.length){var e=JSON.parse(JSON.stringify(U));if(r(e.sort((function(e,t){return e.date<t.date?-1:1}))),void 0!==R&&!k){var t=R.includes("&")?R.indexOf("&"):R.length,n=e.find((function(e){return e.eventId===Number(R.substring(0,t).replace("?",""))}));R.includes("list")?p(n):h(n),R=null,x(!0)}}}),[G]),(0,a.useEffect)((function(){W(),null!==sessionStorage.getItem("username")&&l().get("".concat((0,i.AC)(),"/auth/isMainAdmin?login=").concat(sessionStorage.getItem("username")),{headers:(0,g.Z)()}).then((function(e){C(e.data)}))}),[]),a.createElement(a.Fragment,null,a.createElement(d.Z,{style:{borderRadius:"0"},className:" my-1 bg-dark-green text-white green-header"},a.createElement("h4",{style:{zIndex:1},className:"mb-1"},"Najbliższe wydarzenia")),a.createElement("div",{className:"row mx-0 justify-content-center card-body p-0"},G&&0===n.length&&a.createElement("div",{className:"text-center"},a.createElement(T.Z,{animation:"border",variant:"secondary",size:"lg"})),n.map((function(e){return a.createElement(F,{key:e.eventId,event:e,onJoin:function(){return h(e)},onScore:function(){localStorage.setItem("eventId",e.eventId),q({pathname:"/event",search:"?".concat(e.eventId),state:{eventId:e.eventId}})},onTeamList:function(){(0,i.Ot)(e.eventId,(function(e){return D(e)})),p(e)},onStatement:function(){return I(e)},onEdit:function(){return m(e)},mainAdmin:w})}))),a.createElement("div",{className:"py-4"}),a.createElement(d.Z,{style:{borderRadius:"0"},className:" my-1 bg-dark-green text-white green-header"},a.createElement("h4",{style:{zIndex:1},className:"mb-1"},"Archiwalne wydarzenia")),a.createElement("div",{className:"row mx-0 justify-content-center card-body"},M&&0===K.length&&a.createElement("div",{className:"text-center"},a.createElement(T.Z,{animation:"border",variant:"secondary",size:"lg"})),K.map((function(e){return a.createElement(F,{key:e.eventId,event:e,onJoin:function(){return h(e)},onScore:function(){localStorage.setItem("eventId",e.eventId),q({pathname:"/event",search:"?".concat(e.eventId),state:{eventId:e.eventId}})},onTeamList:function(){(0,i.Ot)(e.eventId,(function(e){return D(e)})),p(e)},onStatement:function(){return I(e)},onEdit:function(){return m(e)},mainAdmin:w})}))),a.createElement("div",{className:"p-3 border-top"},w&&a.createElement(o.Z,{className:"border-top mx-3",variant:"primary",onClick:function(){return m(!0)}},"Dodaj wydarzenie")),a.createElement(S,{show:void 0!==u,handleClose:function(){m(),W()},event:u}),(w||Z)&&a.createElement(Ce,{show:void 0!==v,handleClose:function(){p(),W()},eventId:null==v?void 0:v.eventId,eventName:null==v?void 0:v.name,started:null==v?void 0:v.started}),!w&&!Z&&a.createElement(Y,{show:void 0!==v,handleClose:function(){p(),W()},eventId:null==v?void 0:v.eventId}),z&&a.createElement(Ze,{show:!0,handleClose:function(){return I()},event:z}),a.createElement(re,{show:void 0!==E,handleClose:function(){h(),W()},event:E}))}}}]);
//# sourceMappingURL=main.2ff2be6e96a18410e623.js.map